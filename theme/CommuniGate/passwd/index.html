<cpanel setvar="headerimg=../images/toppassword.gif">
<cpanel setvar="dprefix=../">
<cpanel Branding="include(stdheader.html)">

<cpanelfeature password>
<style type="text/css">
<?cp Branding::spritelist(.spriteicon_img_mini {float:left;margin-right:5px;background: url\{leftparenthesis}"%"\{rightparenthesis};} %,@spriteurl,images::#icon-${img}_mini {background-position\{colon}0 -${cssposition}px;width\{colon}${width}px;height\{colon}${height}px; }:) imgtype=icon,subtype=img,method=scale_60percent,format=png,img=password ?>
</style>

<script type="text/javascript">
//<![CDATA[
var REQUIRED_PASSWORD_STRENGTH = parseInt('<?cp PasswdStrength::get_required_strength(%,strength) app=passwd ?>') || 0;
var init_page = function() {
	var oldpass_validator = new CPANEL.validate.validator("Old Password");
	oldpass_validator.add("oldpassword", "min_length(%input%, 1)", "<cpanel langprint="changepass_oldpass_notempty">");
	oldpass_validator.attach();
	
	var password_validators = CPANEL.password.setup("password", "pass2", "password_strength", REQUIRED_PASSWORD_STRENGTH, "create_strong_password", "why_strong_passwords_link", "why_strong_passwords_text");
	
	CPANEL.validate.attach_to_form("submit", [oldpass_validator, password_validators[0], password_validators[1]]);
	
	YAHOO.util.Dom.get("oldpassword").focus();
};
YAHOO.util.Event.onDOMReady(init_page);
//]]>
</script>
</cpanelfeature>

<div class="body-content">
	
<div class="h1Title"><div class="spriteicon_img_mini" id="icon-password_mini"></div><cpanel langprint="TChangePass"></div>

<cpanelif $FORM{'msg'}=='age'>
<div class="highlight"><cpanel langprint="PasswdAgemsg1"> <cpanel print="$FORM{'days_since_change'}"> <cpanel langprint="PasswdAgemsg2"> <cpanel print="$CONF{'SecurityPolicy::PasswordAge::maxage'}"> <cpanel langprint="PasswdAgemsg3"></div>
</cpanelif>
<cpanelif $FORM{'msg'}=='strength'>
<div class="highlight"><cpanel langprint="PassTooWeak"></div>
</cpanelif>
<cpanelif $FORM{'msg'}=='forced'>
<div class="highlight"><cpanel langprint="An administrator has requested you change your password."></div>
</cpanelif>

<p class="description"><cpanel langprint="change_password_description"></p>
	
<cpanelfeature password>
	<cpanel setvar="vidtut_name=password">
	<cpanel setvar="vidtut_header=TChangePass">
	<cpanel setvar="vidtut_description=VidPswdDesc">
	<cpanel setvar="vidtut_video_name=password_lo">
	<cpanel setvar="vidtut_width=450">
	<cpanel setvar="vidtut_height=323">
	<cpanel include="../video_tutorial_include.html">
</cpanelfeature>

<cpanelfeature password>
	<form  method="post" name="userform" id="userform" action="changepass.html">
        <cpanelif $FORM{'msg'}>
        <input type="hidden" name="msg" id="msg" value="<cpanel print="$FORM{'msg'}">" />
        </cpanelif>
        <cpanelif $FORM{'days_since_change'}>
        <input type="hidden" name="days_since_change" id="days_since_change" value="<cpanel print="$FORM{'days_since_change'}">" />
        </cpanelif>
	<div class="highlight">
	<table border="0" cellspacing="2" cellpadding="0">
		<tr>
			<td align="right"><label for="oldpassword"><cpanel langprint="DPOldPass"></label></td>
			<td><input style="width: 150px" type="password" maxlength="128" name="oldpass" id="oldpassword" size="20" /></td>
			<td><div id="oldpassword_error"></div></td>
                <td>
                  <table>
                    <tr>
                      <td><input type="checkbox" name="enablemysql" value="1" checked="checked"></td><td>Allow MySQL password change</td>
                    </tr>
                  </table>
                </td>
		</tr>
		<tr>
			<td align="right"><label for="password"><cpanel langprint="DPNewPass"></label></td>
			<td><input style="width: 150px" type="password" name="newpass" id="password" maxlength="128" /></td>
			<td><div id="password_error"></div></td>
		</tr>
		<tr>
			<td align="right"><label for="pass2"><cpanel langprint="DPNewConfirm"></label></td>
			<td><input style="width: 150px" maxlength="128" size="20" name="newpass2" id="pass2" type="password" /></td>
			<td><div id="pass2_error"></div></td>
		</tr>	
		<tr>
			<td align="right"><cpanel langprint="email_strength"> (<div style="display: inline" id="why_strong_passwords_link" class="action_link"><cpanel langprint="email_why"></div>):</td>
			<td><div id="password_strength" style="width: 150px; height: 20px; border: 1px solid black; margin: 5px 0px 3px 0px"></div></td>
			<td><input type="button"class="input-button" id="create_strong_password" value="<cpanel langprint="cjt_password_generator">" tabindex="-1" /></td>
		</tr>
		<tr><td colspan="3"><br /></td></tr>
		<tr>
			<td>&nbsp;</td>
			<td colspan="2"><input name="B1" type="submit" class="input-button" value="<cpanel langprint="DPChangeSubmit">" id="submit" /></td>
		</tr>
	</table>
	<div id="why_strong_passwords_text" style="display: none"><cpanel langprint="email_password_why"><br /><br /><cpanel langprint="email_password_tip"></div>	
	</div><!-- end highlight -->
	</form>
	
	<h2><cpanel langprint="DPHintTitle1"></h2>
	<cpanel langprint="DPHint1">
	
	<h2><cpanel langprint="DPHintTitle2"></h2>
	<cpanel langprint="DPHint2">
</cpanelfeature>

<cpanelfeature !password>
	<cpanel include="../refresh.html">
</cpanelfeature>

</div><!-- end body-content -->

<cpanel Branding="include(stdfooter.html)">
