<cpanel Branding="tempsetbrandingpkg($RAW_FORM{'brandingpkg'})">

<cpanel setvar="headerimg=../../images/tools.gif">
<cpanel setvar="dprefix=../../">
<cpanel include="../../stdbheader.html">
<cpanel include="../../ajaxhelp.html">

<style type="text/css">
<?cp Branding::spritelist(.spriteicon_img_mini {float:left;margin-right:5px;background: url\{leftparenthesis}"%"\{rightparenthesis};} %,@spriteurl,images::#icon-${img}_mini {background-position\{colon}0 -${cssposition}px;width\{colon}${width}px;height\{colon}${height}px; }:) imgtype=icon,subtype=img,method=scale_60percent,format=png,img=branding ?>
.sortable td { padding: 0 1px; }
</style>

<script type="text/javascript">
//<![CDATA[

	// validate filename extensions
	// note: extending the CPANEL.validate namespace here to make it easier to add validation in a loop below
	CPANEL.validate.external_check_extension = function (str, fname) {
        // empty string is ok
        if ( str == '' ) return true;

        //make sure there is an extension
        if ( !(/[^.]\.[^.]+$/.test(str)) ) return false;
        var given_extension = str.split('.').pop();

        var allowed_extensions = [ 'gif', 'jpg', 'jpeg', 'png' ];

        return (allowed_extensions.indexOf(given_extension) !== -1);
    }

	// Event processing for the "reset to default" button
	var confirm_wrapper = function( e ) {

		var confirm = window.confirm('<cptext "Are you sure you want to revert this file?">');

		// If the user chose to abort we need to tell the browser not to follow the anchor
		if ( ! confirm ) {
			YAHOO.util.Event.preventDefault(e);

		}
	}

	var init = function() {

		var validation = new CPANEL.validate.validator("<cptext "Main Page Icons">");
		
		// Get all the revert buttons and attach a confirmation box to them
		var els = YAHOO.util.Dom.getElementsByClassName("revert-button");
		for (var i = 0; i < els.length; i++ ) {
			YAHOO.util.Event.on(els[i].id, "click", confirm_wrapper);
		}

		// grab all the input elements with the identifying class name
		var els = YAHOO.util.Dom.getElementsByClassName("file_input_identifier", "input", "icontbl");

	    for ( var i = 0; i < els.length; i++ ) {
          
          // get the classnames on the input element and split them out into an array
	      var classNames = els[i].className.split(' ');
	      var file_input_name = '';

          // for each className see if the name begins with file_input_name_
	      for ( var ii = 0; ii < classNames.length; ii++ ) {
		     if ( /^file_input_name_/.test(classNames[ii]) ) {
			    // if so strip out the leading idenfifer and pass the file name to the validation function
			    var file_input_name = classNames[ii].replace('file_input_name_','');
		     }
	      }
	      validation.add(els[i].id, 'external_check_extension(%input%,"'+file_input_name+'")', '<cptext 'Filename must end in [list,or,_*].', '.gif', '.jpg', '.png', '.jpeg'>');
		}
		validation.attach();

		CPANEL.validate.attach_to_form("submit-button", validation);
			
	};

	YAHOO.util.Event.onDOMReady(init);

	//]]>
	</script>	


</script>

<div class="body-content">
<div class="breadcrumbs"><a class="crumb_highlight" href="index.html"><cpanel Locale="maketext('Branding Editor')"></a> > <a class="crumb_highlight" href="edit_bpkg.html?brandingpkg=<?cp Branding::getbrandingpkg(%,^brandingpkg)?>"><cpanel langprint="Branding_edit_title"></a> > <cpanel langprint="BrandingMainIcons"> </div>
<div class="h1Title"><div class="spriteicon_img_mini" id="icon-branding_mini"></div> <cpanel langprint="BrandingMainIcons"></div>

<p class="description"><cpanel langprint="BrandingIconDesc"></p>

<cpanel setvar="vidtut_name=editicons">
<cpanel setvar="vidtut_header=VidEditIcons">
<cpanel setvar="vidtut_description=VidEditIconsDesc">
<cpanel setvar="vidtut_video_name=editicons_lo">
<cpanel setvar="vidtut_width=450">
<cpanel setvar="vidtut_height=355">
<cpanel include="../../video_tutorial_include.html">


<cpanel langprint="BrandingStyle">:
<strong><?cp Branding::getbrandingpkg(%,&brandingpkgname) ?></strong>

<form id="mainform" name="mainform"  enctype="multipart/form-data" action="doupload.html" method="post">
	<input type="hidden" name="page" value="icon" />
	<input type="hidden" name="brandingpkg" value="<?cp Branding::getbrandingpkg(%,&brandingpkg) ?>" />
	<input type="hidden" name="dir" value="<cpanel print="$homedir">/cpanelbranding/<cpanel print="$CPDATA{'RS'}">/<?cp Branding::getbrandingpkg(%,brandingpkg) ?>" />
    <input type="hidden" name="imgtype" value="icon" />
<table id="icontbl" class="sortable" width="690" style="padding:0;margin-left:-11px;" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th class="cell" scope="col"><cpanel langprint="Group"></th>
        <th class="cell" scope="col"><cpanel langprint="FTPImage"></th>
        <th class="cell" scope="col"><cpanel langprint="description-abbr"></th>
		<th class="cell" scope="col"><cpanel langprint="filename"></th>
        <th class="cell" scope="col"><cpanel langprint="BrandingWidth"></th>
        <th class="cell" scope="col"><cpanel langprint="BrandingHeight"></th>
        <th class="cell sorttable_nosort" scope="col"><cpanel langprint="resetdefault-BoxTrapper"></th>
        <th class="cell sorttable_nosort" scope="col"><cpanel langprint="BUUploadButton"></th>
    </tr>
    </thead>
    <tbody>
<?cp Branding::brandingeditor(
    [tr]
        [td align="center"]%[/td]
        [td align="center"][img title="%" alt="%" border="0" src="%" width="%" height="%" /][/td]
        [td align="center"][div style="width:90px; overflow: hidden;"]%[/div][/td]
	[td align="center"][div style="width:90px; overflow: hidden;"]%[/div][/td]
        [td align="right"]%[/td]
        [td align="right"]%[/td]
        [td align="center"][a class="create-button revert-button" id="anchor%" href="resetimg.html?brandingpkg=$URI_ENCODED_FORM{'brandingpkg'}&amp;imgname=%&amp;imgtype=icon"]$LANG{'reset_text'}[/a][/td]
        [td align="left" width="225px"][div][input type="file" size="16" id="iconfile%" class="file_input_identifier file_input_name_%" name="file%" /] [span class="no_panel" id="iconfile%_error"][/span][input type="hidden" id="filename-%" name="filename-%" value="%" /][/div][/td]
    [/tr],group,htmldescription,htmldescription,&url,width,height,htmldescription,file,width,height,number,file,number,file,number,number,file,number,file) sort=group,imgtype=icon ?>
    </tbody>
</table>

<br /> 
<input type="submit" id="submit-button" class="input-button" value="<cpanel langprint="BrandingUpload">" />
<br />
<br />
<h2><cpanel Locale="maketext('Reset Images')"></h2>
<p><cpanel langprint="BrandingIconRevert"></p>
<p><a class="create-button revert-button" id="revert-button" href="resetall.html?brandingpkg=<cpanel print="$URI_ENCODED_FORM{'brandingpkg'}">&amp;imgtype=icon"><cpanel langprint="BrandingIconReset"></a></p>

<h2><cpanel Locale="maketext('Sprites')"></h2>
<p><cpanel langprint="BrandingSprite"></p>
<p><a class="create-button" href="gensprites.html?brandingpkg=<cpanel print="$URI_ENCODED_FORM{'brandingpkg'}">&amp;imgtype=icon"><cpanel langprint="BrandingSpritesGen"></a></p><cpanel langprint="BRSpriteLink">
</form>

<cpanel include="gobackwhere.html">

</div><!-- end body-content -->

<cpanel Branding="include(stdfooter.html)">
