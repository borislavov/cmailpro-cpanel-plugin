<cpanel Branding="tempsetbrandingpkg($RAW_FORM{'brandingpkg'})">
<cpanel setvar="headerimg=../../images/tools.gif">
<cpanel setvar="dprefix=../../">
<cpanel include="../../stdbheader.html">
<cpanel include="../../ajaxhelp.html">
	
<script type="text/javascript">
//<![CDATA[


	// validate filename extensions
	// note: extending the CPANEL.validate namespace here to make it easier to add validation in a loop below
	CPANEL.validate.external_check_extension = function (str, fname) {
	   // null value is ok
	   if ( str == '' ) return true;

           var test = str.split(/\\|\//);
           test = test[ test.length-1 ];
           if ( test == fname ) return true;
           return false;


	}

	// Event processing for the "reset to default" button
	var confirm_wrapper = function( e ) {

		var confirm = window.confirm('<cptext "Are you sure you want to revert this file?">');

		// If the user choses to abort we need to tell the browser not to follow the anchor
		if ( ! confirm ) {
			YAHOO.util.Event.preventDefault(e);

		}
	}

	var init = function() {
		var validation = new CPANEL.validate.validator("<cptext "Edit Preview Images">");


		// Get all the revert buttons and attach a confirmation box to them
		var els = YAHOO.util.Dom.getElementsByClassName("revert-button");
		for (var i = 0; i < els.length; i++ ) {
			YAHOO.util.Event.on(els[i].id, "click", confirm_wrapper);
		}

		// grab all the input elements
		var els = YAHOO.util.Dom.getElementsByClassName("file_input_element", "input");

		for (var i = 0; i < els.length; i++) {

			var classNames = els[i].className.split(' ');
			var file_input_name = '';

			   // for each className see if the name begins with file_input_name_
			for ( var ii = 0; ii < classNames.length; ii++ ) {
				if ( /^file_input_name_/.test(classNames[ii]) ) {
					// if so strip out the leading idenfifer and pass the file name to the validation function
					var file_input_name = classNames[ii].replace('file_input_name_','');
				}
			}

			validation.add(els[i].id, 'external_check_extension(%input%,"'+file_input_name+'")', '<cptext "File extension must be .html. File names must match the filename listed to the left.">');

		}

		validation.attach();

		CPANEL.validate.attach_to_form("submit-button", validation);
	};

	YAHOO.util.Event.onDOMReady(init);

//]]>
</script>
	
<style type="text/css">
<?cp Branding::spritelist(.spriteicon_img_mini {float:left;margin-right:5px;background: url\{leftparenthesis}"%"\{rightparenthesis};} %,@spriteurl,images::#icon-${img}_mini {background-position\{colon}0 -${cssposition}px;width\{colon}${width}px;height\{colon}${height}px; }:) imgtype=icon,subtype=img,method=scale_60percent,format=png,img=branding ?>
</style>
<div class="body-content">
<div class="breadcrumbs" id="breadcrumbs"><a class="crumb_highlight" href="index.html"><cpanel Locale="maketext('Branding Editor')"></a> > <a class="crumb_highlight" href="edit_bpkg.html?brandingpkg=<?cp Branding::getbrandingpkg(%,^brandingpkg)?>"><cpanel langprint="Branding_edit_title"></a> > <cpanel langprint="BrandingEditHTML"> </div>
<div class="h1Title"><div class="spriteicon_img_mini" id="icon-branding_mini"></div>  <cpanel langprint="BrandingEditHTML"></div>
<p class="description"><cpanel langprint="BrandingEditHTMLDesc"></p><br />

<cpanel langprint="BrandingStyle">
<strong><?cp Branding::getbrandingpkg(%,&brandingpkgname) ?></strong>

<form enctype="multipart/form-data" action="doupload.html" method="post" name="mainform" id="mainform">
<input type="hidden" name="brandingpkg" value="<?cp Branding::getbrandingpkg(%,&brandingpkg) ?>">
<input type="hidden" name="page" value="html" />

<input type="hidden" name="dir" value="<cpanel print="$homedir">/cpanelbranding/<cpanel print="$CPDATA{'RS'}">/<?cp Branding::getbrandingpkg(%,&brandingpkg) ?>">    
<table id="icontbl" class="sortable" width="700" cellpadding="0" cellspacing="0">
    <tr valign="bottom">
        <th class="cell" scope="col" nonsortable="true"><cpanel langprint="description-abbr"></th>
		<th class="cell" scope="col" nonsortable="true"><cpanel langprint="filename"><br/>(<cpanel Locale="maketext('Right Click and Save As â€¦')">)</th>
		<th class="cell" scope="col" nonsortable="true"><cpanel langprint="Edit"></th>
	        <th class="cell" scope="col" nonsortable="true"><cpanel langprint="resetdefault-BoxTrapper"></th>
        <th class="cell" scope="col" nonsortable="true"><cpanel langprint="BUUploadButton"></th>
    </tr>

<?cp Branding::brandingeditor(
    [tr]
        [td align="right"]%[/td]
        [td align="right"][a href="live_rawhtml.html?edittype=html&brandingpkg=$URI_ENCODED_FORM{'brandingpkg'}&file=%&global=%" target="_blank"]%[/a][/td]
        [td align="right"][a class="create-button" href="edithtml-code.html?file=%&edittype=html&brandingpkg=$URI_ENCODED_FORM{'brandingpkg'}&global=%"]$LANG{'Edit'}[/a][/td]
	    [td align="center"][a class="create-button revert-button" id="revert%" href="resethtml.html?edittype=html&brandingpkg=$URI_ENCODED_FORM{'brandingpkg'}&file=%&global=%"]$LANG{'reset_text'}[/a][/td]
	    [td align="left" width="250px"][input class="file_input_element file_input_name_%" type="file" name="file%" id="htmlfile%"] [span id="htmlfile%_error" class="no_panel"][/span][input type="hidden" name="filename-%" value="%"][/td]
	[/tr],htmldescription,^file,global,&file,^file,global,number,^file,global,&file,number,number,number,number,&file) type=html ?>

</table>

	<input type="submit" id="submit-button" class="input-button" value="<cpanel langprint="BrandingUploadHTML">">
</form>

<cpanel include="gobackwhere.html">
</div>
<cpanel Branding="include(stdfooter.html)">
