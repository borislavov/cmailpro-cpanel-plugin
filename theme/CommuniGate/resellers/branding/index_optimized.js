var currentuser;var isreseller;function getQSV(c){var e=window.location.search.substring(1);var b=e.split("&");for(var a=0;a<b.length;a++){var d=b[a].split("=").map(decodeURIComponent);if(d[0]==c){return d[1]}}return -1}function checkbranding_table(){var b=getQSV("brandingpkg");if(b!=-1){var d=document.getElementById("bpkg-list");var c=d.getElementsByTagName("tr");for(var a=1;a<c.length;a++){if(c[a].id!="brandingpkg/"+b){c[a].style.display="none"}else{c[a].style.display=""}}document.getElementById("showall_branding").style.display=""}}function showall_branding(){document.getElementById("showall_branding").style.display="none";var c=document.getElementById("bpkg-list");var b=c.getElementsByTagName("tr");for(var a=1;a<b.length;a++){b[a].style.display=""}}function checkmakepack(){var a=document.makepack.pkg.value;if(a==""){alert(LANG.name_for_package);return false}}function checkuppack(){var a=document.uploadpack.file1.value;if(a==""){alert(LANG.package_to_upload);return false}}function Branding_SetAllCheckBoxes(d,f,a){if(!document.forms[d]){return}var c=document.forms[d].elements[f];if(!c){return}var e=c.length;if(!e){c.checked=a}else{for(var b=0;b<e;b++){c[b].checked=a;check_boxes(c[b])}}}function SetitRight(){if(!document.forms[0]){return}var b=document.forms[0].length;for(var a=0;a<b;a++){var c=document.forms[0].elements[a];check_boxes(c)}}function disablelinks(a){document.getElementById("applybpkg/"+a).href="javascript:void(0)";document.getElementById("applyallbpkg/"+a).href="javascript:void(0)";document.getElementById("setdefaultpkg/"+a).href="javascript:void(0)";document.getElementById("editbpkg/"+a).href="javascript:void(0)"}function enablelinks(a){document.getElementById("applybpkg/"+a).href="switchstyle.html?brandingpkg="+a;document.getElementById("applyallbpkg/"+a).href="applyaccts.html?brandingpkg="+a;document.getElementById("setdefaultpkg/"+a).href="setdefault.html?brandingpkg="+a;document.getElementById("editbpkg/"+a).href="edit_bpkg.html?brandingpkg="+a}function parse_pkgout(h){console.log(this,arguments);var f=h.argument.extvar;var b=h.responseXML.getElementsByTagName("xml")[0];var e=b.getElementsByTagName("package");var c=Array.prototype.filter.call(e,function(i){return i.getAttribute("name")===f})[0];var g=CPANEL.util.get_text_content(c.getElementsByTagName("previewimg")[0]);var a=CPANEL.util.get_text_content(c.getElementsByTagName("previewsmimg")[0]);var d="<a href='"+g.html_encode()+"'><img src='"+a.html_encode()+"' alt='' /></a>";document.getElementById("image/"+f).innerHTML=d}function check_boxes(h){var g=h.id;var a=g.split("/")[0];var f="brandingpkg/"+a;var b="branding_status.xml";var i="disable";var c=document.getElementById(f).className;var d=c.split(" ");d.pop();if(h.checked){i="enable"}if(i=="disable"){document.getElementById(a+"/display").className="brandingpkg-1";var e=DISABLED_IMG;document.getElementById("image/"+a).innerHTML=e;document.getElementById("ul/"+a).className="greyedout";disablelinks(a)}}var DISABLED_IMG="<img src='../../images/disable-previewsm2.gif' />";EVENT.onDOMReady(function(){var a=document.createElement("div");a.style.display="none";a.innerHTML=DISABLED_IMG;document.body.appendChild(a)});function toggle_pkg(f){var e=f.id;var a=e.split("/")[0];var d="brandingpkg/"+a;var g=f.checked?"enable":"disable";var b=f.checked?"brandinginfo.xml":"branding_status.xml";var c="brandingpkg="+encodeURIComponent(a)+"&status="+g;var i=function(j){if(g=="disable"){document.getElementById("image/"+a).innerHTML=DISABLED_IMG;DOM.addClass("ul/"+a,"greyedout");DOM.replaceClass(a+"/display","brandingpkg-0","brandingpkg-1");disablelinks(a)}else{DOM.removeClass("ul/"+a,"greyedout");DOM.replaceClass(a+"/display","brandingpkg-1","brandingpkg-0");enablelinks(a);parse_pkgout.apply(this,arguments)}};var h={success:i,argument:{extvar:a}};YAHOO.util.Connect.asyncRequest("POST",b,h,c)}function applyToAccounts(b){if(currentuser=="cpanel"){var a=b.id.split("/").pop();if(!a){a=""}document.getElementById("reseller_apply_pkg").value=a;CPANEL.util.set_text_content("reseller_apply_pkgname",a||"[root]");make_form_popup("reseller_apply_dialog",function(){this.hide();show_loading(LANG.applying_your_changes);setTimeout(submit_apply,2000)});popupwindows.reseller_apply_dialog.show();return false}return true}function submit_setdefault(){document.getElementById("reseller_setdefault_form").submit()}function submit_apply(){document.getElementById("reseller_apply_form").submit()}function setDefault(b){if(currentuser=="cpanel"){var a=b.id.split("/").pop();if(!a){a=""}document.getElementById("reseller_setdefault_pkg").value=a;CPANEL.util.set_text_content("reseller_setdefault_pkgname",a||"[root]");make_form_popup("reseller_setdefault_dialog",function(){this.hide();show_loading(LANG.applying_your_changes);setTimeout(submit_setdefault,2000)});popupwindows.reseller_setdefault_dialog.show();return false}return true}function make_form_popup(b,a){if(!popupwindows){popupwindows={}}if(popupwindows[b]){return}document.getElementById(b).style.display="";var c=500;popupwindows[b]=new YAHOO.widget.Dialog(b,{effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:0.25},width:c,buttons:[{text:"Submit",handler:a,isDefault:true},{text:"Close",handler:function(){popupwindows[b].hide()},isDefault:false}],fixedcenter:true,constraintoviewport:true,underlay:"none",close:true,visible:false,draggable:true,modal:false});popupwindows[b].render()}YAHOO.util.Event.onDOMReady(checkbranding_table);