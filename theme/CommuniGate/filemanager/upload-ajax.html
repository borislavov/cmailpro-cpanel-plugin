<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<cpanel setvar="dprefix=../">
<html>
<head>
<title>cPanel X</title>
<cpanel relinclude="files/files_head.html">
<script type="text/javascript" src="<cpanel MagicRevision="uri("/yui/utilities_container/utilities_container.js")">"></script>
<script type="text/javascript" src="<cpanel MagicRevision="uri("/cjt/cpanel-all-min.js")">"></script>
<script type="text/javascript">
//<![CDATA[
var uploadkey = '<?cp Rand::getranddata(%,random) ?>';
var dir = <cpanel jsprint="$FORM{'dir'}">;
//]]>
</script>
<script type="text/javascript" src="<cpanel MagicRevision="uri("js/filemanager_upload_optimized.js")">"></script>
<style type="text/css">
<cpanel Branding="include(sprites.html)">

body h1#page-header {
    text-align: left;
    padding-left: 10px;
    font-size: 16px;
    color: #fff;
    margin: 0;
}

#uploadlimits b {
    font-weight: bold;
    font-size: 13px;
}
#uploadlimits td {
    font-size: 13px;
}
#overWriteDlg .myButtonClass { padding:3px; font-size:20px; width:100px; } 
#overWriteDlg .ok_button { color:#2F2; } 
#overWriteDlg .cancel_button { color:#F88; }
#uploaders {
    padding:0px;
}
.smtxt {
    font-size: 11px;

}
.smtxt a {
    font-size: 11px;
    text-decoration: none;
}
.uploadtable {
    font-size: 11px;
}
.progresstxt {
    font-size: 11px;
    padding: 0px;
    text-align: left;
}

table.chmodtbl {
    width: auto;
    font-family: Verdana,Arial,sans-serif;
    font-size: 11px;
    border: 0;
}
table.chmodtbl input {
    width: 1.7em;
}
div.chmod_filelist_container {
    display: none;
}

#upload_queue {
    width: 364px;
    position: fixed;
    bottom: 0;
    right: 0;
}

.progress-complete {
    vertical-align: top;
    border: 1px solid #444;
    -moz-border-radius: 7px;
    -webkit-border-radius: 7px;
    border-radius: 7px;
    overflow:hidden;
    z-index: 2;
}

.progress-image {
    padding: 0;
    margin: 0;
    font-size: 1px;
    height: 15px;
    background-image: url(<cpanel MagicRevision="uri(images/progress_bar.gif)">);
}

.uploader-status {
    display: none;
    margin: 5px;
    padding: 7px;
    background-color: #565656;
    color: #eee;
    border: 1px solid #aaa;
    border-radius: 7px;
    -moz-border-radius: 7px;
}
div.complete:hover,
div.complete *:hover {
    background-color: #777;
    cursor: pointer;
}

p {
    margin-left: 12px;
}

.doc_container {
    padding-left: 12px;
}

.upload-form {
    margin: 0;
}

.code {
    font-family: monospace;
}

#sdlg1 div.bd {
    padding: 0 10px;
}
</style>

<!-- preload these -->
<img style="display:none" src="<cpanel MagicRevision="uri(images/progress_bar.gif)">" />
<img id="progress_bar_done_prototype" style="display:none" src="<cpanel MagicRevision="uri(images/progress_bar_done.gif)">" />

<!-- The ordering of the form elements here is very finicky;
     for some reason, browsers don't like if a file input comes
     immediately inside a <form>, for example. -->
<script type="text/plain" id="uploaderhtml_template">
<div class="uploadtable" style="clear:both">
    <div id="uploadform{thisid_html}">
        <iframe id="ut{thisid_html}" name="ut{thisid_html}" src="javascript:void(0)" style="width:0px;height:0px;border:0"></iframe>
        <form name="uform{thisid_html}" id="frm{thisid_html}" class="upload-form" action="<cpanel print="$ENV{'cp_security_token'}">/json-api/cpanel" onsubmit="return false;" method="post" enctype="multipart/form-data" target="ut{thisid_html}">
            <input type="hidden" name="cpanel_jsonapi_module" value="Fileman" />
            <input type="hidden" name="cpanel_jsonapi_func" value="uploadfiles" />
            <input type="hidden" name="cpanel_jsonapi_apiversion" value="2" />
            <input type="hidden" name="getdiskinfo" value="1" />
            <input type="hidden" name="permissions" value="0644" />
            <input type="hidden" name="cpanel-trackupload" value="" />
            <input type="hidden" name="dir" value="<cpanel print="$FORM{'dir'}">" />
            <input type="hidden" name="overwrite" value="0" />
            <input onchange="uploadfile(this);" size="60" type="file" id="file{thisid_html}" name="file{thisid_html}" />
        </form>
    </div>
    <div id="uploaderstatus{thisid_html}" class="uploader-status" valign="middle">
        <div id="progress-complete{thisid_html}" class="progress-complete">
            <div id="progress-image{thisid_html}" class="progress-image">&nbsp;
            </div>
        </div>
        <div class="progresstxt" id="progresstxt{thisid_html}"><cptext "Starting uploadâ€¦"></div>
    </div>
</div>
</script>

<script type="text/plain" id="already_exists_template">
<cptext 'The file [output,class,_1,code] already exists on the server in the directory [output,class,_2,code]. It was last modified on [_3].',{file_html},{dir_html},{last_mod_html}>
<br /><cptext "Do you want to continue your upload and overwrite it?">
</script>

</head>
<body id="leftmain">
<h1 id="page-header"><img src="img/actions/upload.png" align="absmiddle" alt="upload"><cpanel langprint="FMUploadHead"></h1>
<br /><br /><br />
<p> <cpanel langprint="FMfreespaceBEGIN"> <span class="status" id="file_upload_remain"> <?cp Fileman::getdiskinfo(%,file_upload_remain_humansize) ?></span></p>

<div id='alertbox'></div>

<div class="doc_container">

<cpanel langprint="FMUploadSelectDirPre"> <strong><cpanel print="$FORM{'dir'}"></strong><br />
<div id="uploaders"></div><!-- uploaders -->
<br /><br />
<label>
<cpanel langprint="FMUploadOverwriteCheckbox">
<input id="overwrite_checkbox" type="checkbox" name="overwrite" value="1" />
</label>

<br /><br /><br />
<cpanel include="popups/changeperms.html">

</div>

<div id="sdlg1"></div>
<br /><br />

<script type="text/javascript">
var go_back_destination = <cpanel jsprint="$FORM{'dir'}">;
var LANG = {
    click_to_close : "<cptext "Click to close">",
    yes: "<cptext "Yes">",
    no:  "<cptext "No">"
};
</script>
<div style="text-align:center"><a onclick="return gobacktodir(go_back_destination);" href="dir.html?dir=<cpanel uriprint="$FORM{'dir'}">"><cpanel langprint="FMBackto"> <cpanel print="$FORM{'dir'}"></a></p>
<div id="upload_queue"></div>
<!--
<cpanel langprint="FMfreespaceBEGIN"><cpanel Quota="showquotaremain()"><cpanel langprint="FMfreespaceEND">
<cpanel langprint="FMUploadMaxBytesBEGIN"><cpanel print="$CONF{'file_upload_max_bytes'}"><cpanel langprint="FMUploadMaxBytesEND">
<cpanel langprint="FMUploadLeaveBytesBEGIN"><cpanel print="$CONF{'file_upload_must_leave_bytes'}"><cpanel langprint="FMUploadLeaveBytesEND">
-->
</body>
</html>
