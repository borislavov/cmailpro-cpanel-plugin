var NativeJson=Object.prototype.toString.call(this.JSON)==="[object JSON]"&&this.JSON;function fastJsonParse(b,a){return NativeJson?NativeJson.parse(b,a):YAHOO.lang.JSON.parse(b,a)}var deleteRow_is_picky_yui_2529068=false;(function(){var a=document.createElement("table");try{a.deleteRow(-1)}catch(b){deleteRow_is_picky_yui_2529068=true}})();var searchDataSource;var homeicon='<img src="../images/homeb.gif" alt="" align="absmiddle" />';var useaspx=0;var inited_panels={};var DDM=YAHOO.util.DDM;var loaded_docroots=0;var web_docroots={};var usejson=1;var TEXT_FIELD_FOCUS=0;var CtrlKeyPressed=0;var AltKeyPressed=0;var SVis=0;var selectedFilesCount=0;var locCache={};var selectedFilesCache={};var updatecallback;var waitpanel;var resultspanel;var filesDataTable;var searchDataTable;var lastSelectTime=0;var viewportHeight=0;var selectWindowRegion;var selectStartX=0;var selectStartY=0;var selectMode=0;var selector=null;var selectEl=null;var selectorEl=null;var selectOvers={};var selectStartScrollLeft;var selectStartScrollTop;var closeButtons=[{text:"Close",handler:handleCancel}];var myContextMenu;var node_labelStyle={};node_labelStyle[homedir+"/public_ftp"]="icon-publicftp";node_labelStyle[homedir+"/public_html"]="icon-publichtml";node_labelStyle[homedir+"/www"]="icon-publichtml";node_labelStyle[homedir+"/mail"]="icon-mail";var bOffset=0;var osmode="unix";var quirksmode="Mozilla";var osCheck=navigator.userAgent.toLowerCase();var is_major=parseInt(navigator.appVersion);var is_minor=parseFloat(navigator.appVersion);if(osCheck.indexOf("win")!=-1||osCheck.indexOf("Windows")!=-1){osmode="win32"}if(osCheck.indexOf("mac")!=-1){osmode="mac"}if(navigator.appVersion.indexOf("MSIE")!=-1){bOffset=20;quirksmode="MSIE"}if(navigator.appVersion.indexOf("Safari")!=-1){quirksmode=(is_minor>4?"Safari5":"Safari")}if(navigator.appVersion.indexOf("Opera")!=-1||navigator.userAgent.indexOf("Opera")!=-1){quirksmode="Opera"}var isOldIE=(quirksmode=="Opera"||quirksmode=="MSIE")?1:0;if(quirksmode=="Opera"){bOffset=20;if(is_minor<9.21){alert("Use of Opera older then 9.21 with this file manager is not recommended.")}}YAHOO.namespace("fileman");YAHOO.util.DDM.mode=YAHOO.util.DDM.POINT;YAHOO.fileman.DDFile=function(b,a){this.initFile(b,"files")};YAHOO.fileman.DDFile.prototype=new YAHOO.util.DDProxy();YAHOO.fileman.DDFile.TYPE="DDFile";YAHOO.fileman.DDFile.prototype.autoScroll=function(j,i,e,k){return 0;if(this.scroll){var b=document.getElementById("filesarea_scrollable");var d=document.getElementById("subleft");var l=this.DDM.getClientHeight();var m=this.DDM.getScrollTop();var g=e+i;var f=(l+m-i-this.deltaY);var c=40;var a=(document.all)?80:30;if(g>l&&f<c){if(d.scrollTop<d.scrollHeight){d.scrollTop+=a}if(b.scrollTop<b.scrollHeight){b.scrollTop+=a}}i-=document.getElementById("top").offsetHeight;if(i<m&&i-m<c){if(d.scrollTop>0){d.scrollTop-=a}if(b.scrollTop>0){b.scrollTop-=a}}}};YAHOO.fileman.DDFile.prototype.initFile=function(b,a){if(!b){return}this.init(b,a);this.initFrame();this.isTarget=false;this.isFile=true;this.action="move";this.type=YAHOO.fileman.DDFile.TYPE};function selectAllFiles(){filesDataTable.selectAllRows()}function unselectAllFiles(){filesDataTable.unselectAllRows()}function unselectFile(a){filesDataTable.unselectRow(a)}function selectFile(a){filesDataTable.selectRow(a)}YAHOO.fileman.DDFile.prototype.startDrag=function(f,e){var b=this.getEl().id;var a=0;selectedFilesCount=0;var h=filesDataTable.getRow(this.fileId);if(h&&!filesDataTable.isSelected(h)){selectFile(h)}var g=filesDataTable.getSelectedTrEls();selectedFilesCount=g.length;var j=filesDataTable.getRows();var k=j.length;for(var c=0;c<k;c++){DDM.getDDById(j[c].id).unlock()}var d=document.getElementById("filesi");if(selectedFilesCount>0){d.innerHTML=selectedFilesCount+(selectedFilesCount>1?" Files":" File")}};YAHOO.fileman.DDFile.prototype.endDrag=function(g){document.getElementById("copyi").style.display="none";document.getElementById("filesi").style.display="none";var b=filesDataTable.getRows();var f=b.length;for(var c=0;c<f;c++){DDM.getDDById(b[c].id).lock()}var d=filesDataTable.getSelectedTrEls();var a=d.length;for(var c=0;c<a;c++){DDM.getDDById(d[c].id).unlock()}};YAHOO.fileman.DDFile.prototype.onDrag=function(f,g){if(!(CtrlKeyPressed||f.ctrlKey||f.shiftKey||selectedFilesCount>0)){return}var b=YAHOO.util.Event.getPageX(f);var a=YAHOO.util.Event.getPageY(f);if(selectedFilesCount>0){var d=document.getElementById("filesi").style;d.display="block";d.top=(a+7)+"px";d.left=(b+23)+"px";d=null}else{document.getElementById("filesi").style.visible="none"}if(CtrlKeyPressed||f.ctrlKey||f.shiftKey){var c=document.getElementById("copyi").style;if(!SVis){c.display="block";SVis=1}c.top=(a+7)+"px";c.left=(b+7)+"px";c=null}else{if(SVis){document.getElementById("copyi").style.display="none";SVis=0}}};YAHOO.fileman.DDFile.prototype.onDragDrop=function(f,h){var c=DDM.getDDById(h);if(c.action){var d=c.action;if(d=="move"&&(CtrlKeyPressed||f.ctrlKey||f.shiftKey)){d="copy"}var b=c.filePath;if(b==null){return}var a;var g=[];if(this.id.match(/^ygtvt/)||this.id.match(/^ygtvcontent/)){a=[this.filePath]}else{a=filesDataTable.getSelectedTrEls().map(getFilePathFromRow)}if(d=="unlink"){scheduleFileOp("unlink",a,g);alert("Trash Operations are disabled because the system is in test mode!")}else{if(d=="copy"){g[0]=b;scheduleFileOp("copy",a,g)}else{if(d=="move"){g[0]=b;scheduleFileOp("move",a,g)}else{if(d=="rename"){g[0]=b;scheduleFileOp("rename",a,g)}else{alert("Unhandled action: "+d+" from "+a.join(",")+" to "+b)}}}}}SVis=0;getRealObj(c.id).style.backgroundColor="";document.getElementById("copyi").style.display="none";document.getElementById("filesi").style.display="none"};function getRealObj(a){if(a.match(/^ygtvt/)){return document.getElementById(a).parentNode}else{return document.getElementById(a)}}YAHOO.fileman.DDFile.prototype.onDragEnter=function(b,a){getRealObj(a).style.backgroundColor="#aaa"};YAHOO.fileman.DDFile.prototype.onDragOut=function(b,a){getRealObj(a).style.backgroundColor=""};function xmlStaterrorFunction(a){setLoading();if(!a){return}alert("Error: "+a.status+" "+a.statusText+" There was a problem fetching the files information: "+a.responseText);refreshFiles()}function scheduleFileOp(f,b,d,k,g,m){if(/chmod/i.test(f)){if(!/^[0-7]{3,4}$/.test(k)){alert(LANG.chmod_error);refreshFiles();return false}if(k.length<4){k="0"+k}}if(/rename/i.test(f)){var h=d[0];var c=filesDataTable.getRecordSet();for(e=0;e<c._records.length;e++){if(h==c._records[e]._oData.file){alert(YAHOO.lang.substitute(LANG.rename_conflict,{file:h}));refreshFiles();return false}}}var l={success:FileOpCallBack,failure:xmlStaterrorFunction,argument:{srcFileList:b,destFileList:d,fileop:f,setdata:g,metadata:k,fileList:m,selected_rows:filesDataTable.getSelectedTrEls()}};var j="cpanel_jsonapi_module=Fileman&cpanel_jsonapi_func=fileop&cpanel_jsonapi_apiversion=2&filelist=1&multiform=1&doubledecode=0&op="+f+"&metadata="+k+"&";for(var e=0;e<b.length;e++){j+="sourcefiles="+safeencode(b[e])+"&"}for(var e=0;e<d.length;e++){j+="destfiles="+safeencode(d[e])+"&"}var a=CPANEL.security_token+"/json-api/cpanel";YAHOO.util.Connect.asyncRequest("POST",a,l,j)}YAHOO.widget.Node.prototype.get_common_ancestor=function(a){var c=this;do{var b=a;do{if(c===b){return c}}while(b=b.parent)}while(c=c.parent);return};function FileOpCallBack(E){var p=fastJsonParse(E.responseText);if(p==null){alert("There was a problem fetching the file list! Please reload and try again.");return}var G;var g=p.cpanelresult.data;var b=0;var f=function(){};var H=[];var K=cwd.length;if(E.argument.fileop=="chmod"){var I=E.argument.fileList||[E.argument.selected_rows[0]];var B;for(var C=0;B=I[C];C++){var n=filesDataTable.getRecord(B);filesDataTable.updateCell(n,"nicemode",E.argument.metadata)}return}for(G=0;G<g.length;G++){var j=g[G].result;var k=YAHOO.util.DataSource.parseString(g[G].src);if(!k){var u=g[G].err||"Unknown";alert("FileOp Failure (source could not be read) : "+u);break}var w=YAHOO.util.DataSource.parseString(g[G].dest);if(w){var L=getFileBase(w);var A=L[0];var J=L[1]}var x=getFileBase(k);var e=x[0];var t=x[1];var P=w+"/"+t;if(parseInt(j)){var a=(E.argument.fileop==="move")&&(g.length===1)&&(A===cwd)&&!filesDataTable.getRecordSet().getRecords().some(function(i){return i.getData("file")===J});if(a||(E.argument.fileop==="rename")){f=function(){nukeNode(e,1)};var D=DDM.getDDById(E.argument.metadata.id);D.filePath=w;if(E.argument.setdata){var O=getFileBase(w);var n=filesDataTable.getRecord(E.argument.selected_rows[0]);filesDataTable.getRecordSet().updateKey(n,"file",O[1]);filesDataTable.render()}b=1}else{if(E.argument.fileop=="trash"||E.argument.fileop=="unlink"){H.push(t);f=function(){E.argument.srcFileList.forEach(remove_path_from_tree)}}else{if(E.argument.fileop=="compress"){var N=g[G].output;var h="";if(N.length==4096){h="</pre><br /><b>Output Truncated by browser<pre>"}var s=unescape(N);if(A==cwd){b=1}f=function(){nukeNode(e,1)};show_results("Compression Results",s+h)}else{if(E.argument.fileop=="extract"){var N=g[G].output;var h="";if(N.length==4096){h="</pre><br /><b>Output Truncated by browser<pre>"}var s=unescape(N);if(w==cwd){b=1}f=function(){nukeNode(e,1)};show_results("Extraction Results",s+h)}else{if(E.argument.fileop=="move"){var v=RootFileTree.getNodeByProperty("path",k);var q;if(v){var M=RootFileTree.getNodeByProperty("path",e);var d=RootFileTree.getNodeByProperty("path",w);q=M.get_common_ancestor(d);f=function(){nukeNode(q,1)}}if(w===cwd){refreshFiles()}else{H.push(t)}}else{if(E.argument.fileop=="link"){if(w==cwd){b=1}}}}}}}}else{var u=g[G]["err"]||g[G]["error"]||p.cpanelresult.error||"Unknown";if(k){alert("FileOp Failure on: "+k+": "+u)}else{alert("FileOp Failure : "+u)}refreshFiles()}}if(H.length){unselectAllFiles();var m={};var F=filesDataTable.getRecordSet().getRecords();var c;for(var C=0;c=F[C];C++){m[c.getData("file")]=c}H=H.map(function(i){return filesDataTable.getTrEl(m[i])});var z=filesDataTable.getTbodyEl();var l=null;var y=function(i){if(!i||(i.recordIndex===l)){var r=H.pop();l=filesDataTable.getRecordIndex(r);filesDataTable.deleteRow(r);if(H.length===0){filesDataTable.removeListener("rowDeleteEvent",y)}}};filesDataTable.addListener("rowDeleteEvent",y);y()}if(E.argument.fileop=="copy"){b=1}f();waitpanel.hide();if(b==1){refreshFiles()}g=null;G=null}function debug(a){if(window.console){window.console.log(a)}else{if(console){console.log(a)}else{alert(a)}}}function getFileBase(b){var a=b.split("/");var c=[];c[0]="";c[1]=a.pop();c[0]=a.join("/");return c}function nukeNode(a,c){if(!a){return}if(!(a instanceof YAHOO.widget.Node)){a=RootFileTree.getNodeByProperty("path",a)}var b=a.expanded;RootFileTree.removeChildren(a);if(c===null&&b){if(b){a.expand()}}else{if(c){a.expand()}}}function add_path_to_tree(d,b){var a=d.replace(/\/[^\/]+$/,"");var e=RootFileTree.getNodeByProperty("path",a);if(!e){return}if(!e.childrenRendered&&!e.isLeaf){return}var c;if(b&&e.children.length>0){b=b.replace(/^.*\/([^\/]+)/,"$1");c=RootFileTree.getNodeByProperty("path",a+"/"+b)}var f=new FM_Tree_Node(d.replace(/^.*\/([^\/]+)/,"$1"),e,{isLeaf:true});if(c){f.insertBefore(c)}e.isLeaf=false;e.refresh()}function remove_path_from_tree(e){var d=RootFileTree.getNodeByProperty("path",e);var g,c;if(d){g=d.parent;var c=!d.nextSibling&&!d.previousSibling;RootFileTree.removeNode(d,true)}else{var h=e.match(/^(.*)\/([^\/]+)\/?$/);if(h[1]===cwd){var a=filesDataTable.getRecordSet().getRecords();var f,b=0;while((f=a[b])&&!/-directory/i.test(f.getData("mimetype"))){b++}c=!f}}if(c){if(!g){g=RootFileTree.getNodeByProperty("path",cwd)}g.isLeaf=true;g.collapse();g.updateIcon()}}var RootFileTree;var uriHistoryPos=0;var uriHistory=new Array();var cwd;var myDataSource;var filesDataTable;function setupFilesTable(g,b){if(!g){g=this}var d=g.getTbodyEl().rows;var c=g.getRecordSet().getLength();for(var f=0;f<c;f++){var e=(b?DDM.getDDById(d[f].id):new YAHOO.fileman.DDFile(d[f]));var j=g.getRecord(f);var a=j.getData();var h=a.mimetype;if(h.match("-directory")||h=="mail"||h=="publichtml"||h=="publicftp"){e.type="dir";e.isTarget=true}else{e.type="file"}e.action="move";e.fileId=f;e.filePath=cwd+"/"+a.file;e.lock()}if(b){return}if(c>0){g.hideTableMessage()}if(updatecallback){updatecallback();updatecallback=null}}function handleunselectAllRowsEvent(){var a=this.getRows();handleRowUnSelect({target:a})}YAHOO.widget.DataTable.prototype.selectAllRows=function(){var b=this.getRows();for(var a=0;a<b.length;a++){this.selectRow(b[a])}handleRowSelect()};YAHOO.widget.DataTable.prototype.getRows=function(){return this.getTbodyEl().getElementsByTagName("tr")};YAHOO.widget.DataTable.prototype.onDataReturnSearch=function(a,b){waitpanel.hide();show_panel("search-results");document.getElementById("search-results-div").style.display="block";searchDataTable.clearRows();searchDataTable.showTableMessage(YAHOO.widget.DataTable.MSG_LOADING,YAHOO.widget.DataTable.CLASS_LOADING);this.onDataReturnInitializeTable(a,b)};YAHOO.widget.DataTable.prototype.onDataReturnReplaceRows=function(a,b){this.set("MSG_EMPTY",LANG.dir_empty);unselectAllFiles();load_docroots();this.onDataReturnInitializeTable(a,b)};function xmlLoaderrorFunction(a){if(!a){return}alert("Error: "+a.status+" "+a.statusText+" There was a problem fetching the files information: "+a.responseText);a.argument.fnLoadComplete()}function safeencode(d){var c=encodeURIComponent(d);var a=-1;var b="";for(var e=0;e<c.length;e++){if(a>=0){a++}if(a>=3){a=-1}if(a==1||a==2){b+=c.substring(e,e+1).toLowerCase()}else{b+=c.substring(e,e+1)}if(c.substring(e,e+1)=="%"){a=0}}return b.replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/,/g,"%2c").replace(/'/g,"%27")}function handleColumnSort(a){unselectAllFiles();setupFilesTable(this,1)}function FM_Tree_Node(a,d,c){var b={label:a.html_encode(),path:(d.data.path||"")+"/"+a.replace(/^\/+/,"")};if(c){YAHOO.lang.augmentObject(b,c)}FM_Tree_Node.superclass.constructor.call(this,b,d,false)}YAHOO.lang.extend(FM_Tree_Node,YAHOO.widget.TextNode);function parsejsonFile(a){var j=fastJsonParse(a.responseText);if(j==null){alert("There was a problem fetching the json file list! Please reload and try again.");return}var b=a.argument.node;var l={};var h=j.cpanelresult.data;for(var g=0;g<h.length;g++){if(!h[g].file){continue}var c;c=h[g].file;var e=h[g].path+"/"+h[g].file;var k=new FM_Tree_Node(h[g].file,b,{type:h[g].type,isLeaf:h[g].isleaf=="1"});if(e in node_labelStyle){k.labelStyle=node_labelStyle[e]}l[e]=k}a.argument.fnLoadComplete();for(var e in l){var k=l[e];var d=k.getContentEl();if(d){var f=new YAHOO.fileman.DDFile(d.id);f.type="dir";f.isTarget=true;f.filePath=e}}}YAHOO.widget.DataTable.prototype.clearRows=function(){this.getRecordSet().reset();this.render()};function actionHandler(b){var a=filesDataTable.getSelectedTrEls();if(/edit/i.test(b)){if(a.length>1){alert(LANG.tooMany);return false}if(a.length<1){alert(LANG.tooFew);return false}if(actionlist[b].test(a)!=1){if(/htmledit/i.test(b)){alert(LANG.notValidHTML)}else{alert(LANG.notValid)}return false}}if(actionlist[b].test(a)==1){actionlist[b].handler(a)}return false}var actionlist={unselectall:{handler:function(){unselectAllFiles()},test:function(a){if(a&&a[0]){return 1}}},selectall:{handler:function(){selectAllFiles()},test:function(){return 1}},home:{handler:function(){updateFileList(homedir)},test:function(){if(cwd!=homedir){return 1}}},navup:{handler:function(){navigateUp()},test:function(){if(cwd!=homedir){return 1}}},navback:{handler:function(){navigateBack()},test:function(){if(uriHistoryPos>0){return 1}}},navnext:{handler:function(){navigateNext()},test:function(){if(uriHistoryPos<uriHistory.length-1){return 1}}},refresh:{handler:function(){refreshFiles()},test:function(){return 1}},upload:{handler:function(){uploadFiles()},test:function(){return 1}},newfile:{handler:function(){show_panel("newfile")},test:function(){return 1}},newfolder:{handler:function(){show_panel("newfolder")},test:function(){return 1}},copy:{contextmenuitem:6,handler:function(){show_panel("copy")},test:function(a){if(a&&a[0]){return 1}}},move:{contextmenuitem:5,handler:function(){show_panel("move")},test:function(a){if(a&&a[0]){return 1}}},download:{contextmenuitem:0,handler:function(){downloadFiles()},test:function(a){if(a&&a[0]){var b=filesDataTable.getRecord(a[0]).getData("mimetype");if(!(b.match("-directory")||b=="mail"||b=="publichtml"||b=="publicftp")){return 1}}}},leechprotect:{contextmenuitem:13,handler:function(){dir_uri_action("../htaccess/leechprotect/dohtaccess.html?dir=")},test:function(){return !actionlist.download.test.apply(this,arguments)}},indexmanager:{contextmenuitem:14,handler:function(){dir_uri_action("../indexmanager/dohtaccess.html?dir=")},test:function(){return !actionlist.download.test.apply(this,arguments)}},dirprotect:{contextmenuitem:12,handler:function(a){dir_uri_action("../htaccess/dohtaccess.html?dir=")},test:function(){return !actionlist.download.test.apply(this,arguments)}},"delete":{contextmenuitem:9,handler:function(){show_panel("delete")},test:function(a){if(a&&a[0]){return 1}}},rename:{contextmenuitem:7,handler:function(){show_panel("rename")},test:function(a){if(a&&a[0]){return 1}}},edit:{contextmenuitem:2,handler:function(h,f){var e=filesDataTable.getRecord(h[0]).getData("file");var i=f?"codeedit":"textedit";var b=f?"codeedit-charset":"textedit-charset";var d=document.getElementById(b);if(!d.options||!d.options.length){populate_charset(d)}if(!self.NVData||!NVData.ignorecharencoding){show_loading(YAHOO.lang.substitute(LANG.detecting_encoding,{file_html:e.html_encode()}),"");var c=function(k){var j=k[0].encoding;select_charset(d,j);waitpanel.hide();show_panel(i)};cpanel_jsonapi2(c,"Encoding","guess_file","file",cwd+"/"+e)}else{init_panels(i);var a=panels[i].panel;var g=a.show;a.show=function(){};show_panel(i);a.show=g;if(f){handleCodeEdit(a)}else{handleTextEdit(a)}}},test:function(a){if(a&&a[0]){var c=actionlist.download.test.apply(this,arguments);if(c){var b=filesDataTable.getRecord(a[0]).getData("humansize");return/Bytes|KB/i.test(b)}}}}};YAHOO.lang.augmentObject(actionlist,{codeedit:{contextmenuitem:3,handler:function(a){actionlist.edit.handler.call(this,a,true)},test:actionlist.edit.test},htmledit:{contextmenuitem:4,handler:function(m){var d=filesDataTable.getRecord(m[0]).getData("file");var h=document.getElementById("htmledit-urls");var j=document.getElementById("htmledit-basedir");h.options.length=0;var f=m[0];var i=0;var g=-1;for(var e in web_docroots){var b=web_docroots[e];var k=cwd.substring(0,b.length);var l=cwd.substring(b.length);if(k==b){g++;h.options[g]=new Option("http://"+e+l+"/"+d,"http://"+e+l);j.options[g]=new Option(b,b);if(e==maindomain){h.options[g].selected=true;j.options[g].selected=true;i=1}}}if(!i){if(!h.options.length){g++;h.options[g]=new Option("http://"+maindomain+"/"+d,"http://"+maindomain);j.options[g]=new Option(cwd,cwd)}h.options[g].selected=true;j.options[g].selected=true}var c=document.getElementById("htmledit-charset");if(!c.options||!c.options.length){populate_charset(c)}if(!self.NVData||!NVData.ignorecharencoding){show_loading(YAHOO.lang.substitute(LANG.detecting_encoding,{file_html:d.html_encode()}),"");document.getElementById("htmledit-encodings").style.display="";var a=function(p){var n=p[0].encoding;select_charset(c,n);show_panel("htmledit");waitpanel.hide()};cpanel_jsonapi2(a,"Encoding","guess_file","file",cwd+"/"+d)}else{document.getElementById("htmledit-encodings").style.display="none";show_panel("htmledit")}},test:function(b){if(b&&b[0]){var d=actionlist.edit.test.apply(this,arguments);if(d){var a=filesDataTable.getRecord(b[0]).getData("file");if(/\.html?$/i.test(a)){return true}var c=filesDataTable.getRecord(b[0]).getData("mimetype");if(/html/i.test(c)){return true}}}}},compress:{contextmenuitem:11,handler:function(){show_panel("compress")},test:function(a){if(a&&a[0]){return 1}}},extract:{contextmenuitem:10,handler:function(){show_panel("extract")},test:function(a){if(a&&a[0]&&!a[1]){var b=filesDataTable.getRecord(a[0]).getData("mimetype");if(b==="application/zip"||b==="application/x-gzip"||b==="application/x-tar"||b==="application/x-bzip2"||b==="application/x-bzip"||b==="application/x-rar-compressed"){return 1}if(b.match(/package|archive|compress/i)){return 1}}}},chmod:{contextmenuitem:8,handler:function(){show_panel("chmod")},test:function(a){if(a&&a[0]){return 1}}},view:{contextmenuitem:1,handler:function(){viewFiles()},test:function(){return actionlist.download.test.apply(this,arguments)}}});function navigateUp(){var b=cwd.split("/");b.pop();var a=b.join("/");if(a.length<=homedir.length){if(cwd!=homedir){updateFileList(homedir)}}else{updateFileList(a)}}function navigateBack(){var b;var a=uriHistoryPos>0;if(a){uriHistoryPos--;b=uriHistory[uriHistoryPos];updateFileList(b,1)}}function navigateNext(){var b;var a=uriHistoryPos<uriHistory.length-1;if(a){uriHistoryPos++;b=uriHistory[uriHistoryPos];updateFileList(b,1)}}function updateFileList(d,a,g){filesDataTable.set("MSG_EMPTY",filesDataTable.get("MSG_LOADING"));filesDataTable.getRecordSet().reset();filesDataTable.render();var c={success:filesDataTable.onDataReturnReplaceRows,failure:filesDataTable.onDataReturnReplaceRows,scope:filesDataTable,argument:filesDataTable.getState()};var f=new Date();myDataSource.sendRequest("dir="+safeencode(d)+"&showdotfiles="+showhidden+"&cache_fix="+f.getTime(),c);updatecallback=g;cwd=d;var b=d.replace(new RegExp("^"+homedir),"").replace(/^\//,"");document.getElementById("location").value=b;if(!a){if(uriHistory[uriHistory.length-1]!=cwd){uriHistory.push(cwd)}uriHistoryPos=uriHistory.length-1}for(var e in selectedFilesCache){delete selectedFilesCache[e]}}function uploadFiles(){document.getElementById("actionform").action="upload-ajax.html";document.getElementById("actionform_dir").value=cwd;document.getElementById("actionform").submit()}var editFile=function(f,e){var c=e.split("/");var b=c.pop();var d=c.join("/");var g;if(f==2){document.getElementById("actionform").action="htmledit.html"}else{document.getElementById("actionform").action="editit.html"}document.getElementById("actionform_file").value=b;document.getElementById("actionform_dir").value=d;var a=document.getElementById("actionform");if(f==1){var g=document.createElement("input");g.type="hidden";g.name="codeedit";g.value="1";a.appendChild(g);a.submit();a.removeChild(g)}else{a.submit()}};function changeCompression(){var a=filesDataTable.getSelectedTrEls();setCompressFileName(a)}function setCompressFileName(a){var d=document.compressform.compresstype;var c="zip";for(var b=0;b<d.length;b++){if(d[b].checked){c=d[b].value;break}}document.getElementById("compressfilepath").value=getRelPath(getFilePathFromRow(a[0]))+"."+c}function viewFile(d){var b=d.split("/");var a=b.pop();var c=b.join("/");document.getElementById("actionform").action="showfile.html";document.getElementById("actionform_file").value=a;document.getElementById("actionform_dir").value=c;document.getElementById("actionform").submit()}function viewFiles(){var a=filesDataTable.getSelectedTrEls();if(a[0]){viewFile(getFilePathFromRow(a[0]))}}function getFilePathFromRow(b){var a=filesDataTable.getRecord(b);var c=a.getData();return cwd+"/"+c.file}function editFiles(b){var a=filesDataTable.getSelectedTrEls();if(a[0]){editFile(b,getFilePathFromRow(a[0]))}}function deleteFiles(){var a=filesDataTable.getSelectedTrEls();if(a[0]){var b=filesDataTable.getSelectedTrEls().map(getFilePathFromRow);var c=[];scheduleFileOp("unlink",b,c)}}function downloadFiles(){var c=filesDataTable.getSelectedTrEls();var a=c.length;if(a>0){if((a>1)&&!confirm(LANG.confirm_download)){return}var b=c.map(getFilePathFromRow);var d=setInterval(function(){if(b.length){downloadFile(b.shift())}else{clearInterval(d)}},200)}}function refreshFiles(){updateFileList(cwd)}function finishedLoading(){alert("done")}function clickFolder(c){var a=c.node;var b=a.data.path;updateFileList(b);if(a.expanded){a.focus();return false}else{return true}}var myFileTree=function(){function a(g,c){var h={success:parsejsonFile,failure:xmlLoaderrorFunction,argument:{node:g,fnLoadComplete:c}};var e=new Date();var f=CPANEL.security_token+"/json-api/cpanel";var d="cpanel_jsonapi_module=Fileman&cpanel_jsonapi_func=listfiles&cpanel_jsonapi_apiversion=2&checkleaf=1&types=dir&dir="+safeencode(g.data.path)+"&showdotfiles="+showhidden+"&cache_fix="+e.getTime();YAHOO.util.Connect.asyncRequest("POST",f,h,d)}function b(){RootFileTree=new YAHOO.widget.TreeView("treeContainer");RootFileTree.setDynamicLoad(a,1);RootFileTree.subscribe("clickEvent",clickFolder);var c=RootFileTree.getRoot();var d=new FM_Tree_Node(homedir,c);d.expand();RootFileTree.draw();d.getLabelEl().innerHTML='<img align="absmiddle" src="../images/homeb.gif"> ('+homedir.html_encode()+")";var f=d.getContentEl();if(f){f.style.cursor="move";var e=new YAHOO.fileman.DDFile(f.id);e.type="dir";e.isTarget=true;e.filePath=homedir}}return{init:b}}();var EVENT=YAHOO.util.Event;EVENT.addListener(window,"load",myFileTree.init,myFileTree,true);function dirnav(){updateFileList(homedir+document.getElementById("location").value)}function downloadFile(b){var a=document.createElement("iframe");a.name="download_box_"+Math.random();a.style.display="none";document.body.appendChild(a);a.src=CPANEL.security_token+"/download?skipencode=1&file="+safeencode(b);var c=setInterval(function(){document.body.removeChild(a);clearInterval(c)},300000)}function deactivateButton(d){var a=document.getElementById("action-"+d);if(!a){return}var b=a.getElementsByTagName("img");if(!b[0].src.match("grey")){var e=b[0].src.split(".");var c=e.pop();b[0].src=e.join(".")+"_grey."+c}DOM.addClass(a,"disabled")}function activateButton(c){var a=document.getElementById("action-"+c);if(!a){return}var b=a.getElementsByTagName("img");if(b[0].src.match("_grey")){b[0].src=b[0].src.replace("_grey","")}DOM.removeClass(a,"disabled")}function handleSelections(c){var a=[];for(var b in selectedFilesCache){if(selectedFilesCache[b]){a.push(selectedFilesCache[b])}}for(var d in actionlist){if(actionlist[d].test(a)==1){if(actionlist[d].enabled!=1){actionlist[d].enabled=1;activateButton(d)}}else{if(actionlist[d].enabled!=0){actionlist[d].enabled=0;deactivateButton(d)}}}}function formatSearchFile(b,a,c,d){CPANEL.util.set_text_content(b,getRelPath(d))}function formatImageCellNoCheck(b,a,c,d){b.innerHTML='<img align="absmiddle" src="../mimeicons/'+unescape(d)+'.png" />';YAHOO.util.Dom.addClass(b,"diricon")}function formatImageCell(b,a,c,d){b.innerHTML='<img align="absmiddle" src="../mimeicons/'+unescape(d)+'.png" />';YAHOO.util.Dom.addClass(b,"diricon")}function formatTxt(b,a,c,d){CPANEL.util.set_text_content(b,d)}function handleRowSelect(){var b=filesDataTable.getSelectedRows();if(!isArray(b)){b=[b]}for(var a=0;a<b.length;a++){var d=b[a];if(!d){continue}if(typeof d=="object"){selectedFilesCache[d.id]=d;d=d.id}else{selectedFilesCache[d]=document.getElementById(d)}if(!d){continue}var c=DDM.getDDById(d);if(c){c.unlock();c.isTarget=false}}if(selectMode!=2){handleSelections()}}function handleRowUnSelect(b){var c=b.target;if(!isArray(c)){c=[c]}for(var a=0;a<c.length;a++){var e=c[a];if(!e){continue}if(typeof e=="object"){e=e.id;delete selectedFilesCache[e]}else{delete selectedFilesCache[e]}if(!e){continue}var d=DDM.getDDById(e);if(d){d.lock();if(d.type!="file"){d.isTarget=true}}}if(selectMode!=2){handleSelections()}}function upgradeFm(){usejson=1;var l=function(G,H,I,K){G.innerHTML="<span class='renameable' title='"+K.html_encode()+"'>"+K.html_encode()+"</span>";var J=G.firstChild;var F=this;EVENT.on(J,"dblclick",YAHOO.util.Event.stopPropagation);EVENT.on(J,"click",function(Q){if(!filesDataTable.isSelected(H)){return true}YAHOO.util.Event.stopPropagation(Q);var P=document.getElementById("renameField");if(P){if(DOM.isAncestor(G,P)){P.blur()}else{return true}}var O=function(){TEXT_FIELD_FOCUS=0;new_value=R.value;N.disable();var U=F.getRow(H);if(new_value&&(new_value!=K)){var T=[U];var S=[cwd+"/"+H.getData("file")];var V=[new_value];scheduleFileOp("rename",S,V,U,1);R.disabled=true;EVENT.removeListener(R,"blur",L);R.blur()}else{L()}};var L=function(){CPANEL.util.set_text_content(J,K)};var M=function(T,S,U){switch(S[0]){case 27:L();break;case 13:O();break}};J.innerHTML="<input id='renameField' width='100%' value='"+K.html_encode()+"'/>";TEXT_FIELD_FOCUS=1;var R=J.firstChild;R.focus();EVENT.on(R,"blur",L);EVENT.on(R,"mousedown",YAHOO.util.Event.stopPropagation);EVENT.on(R,"dragstart",YAHOO.util.Event.stopPropagation);EVENT.on(R,"click",YAHOO.util.Event.stopPropagation);EVENT.on(R,"dblclick",YAHOO.util.Event.stopPropagation);var N=new YAHOO.util.KeyListener(R,{keys:[27,13]},M);N.enable()})};var s=CPANEL.cldr.datetime_format.replace("{0}",CPANEL.DateTime.time_format_short).replace("{1}",LANG.today);var j=CPANEL.cldr.datetime_format.replace("{0}",CPANEL.DateTime.time_format_short).replace("{1}",LANG.yesterday);var d=new Date();var m=(new Date(d.getFullYear(),d.getMonth(),d.getDate())).getTime()/1000;var t=(new Date(d.getFullYear(),d.getMonth(),d.getDate()-1)).getTime()/1000;var w=(new Date(d.getFullYear(),d.getMonth(),d.getDate()+1)).getTime()/1000;var E=function(F,J,H,I){var G;if(I<w){if(I>=m){G=s}else{if(I>=t){G=j}}}CPANEL.util.set_text_content(F,(new Date(1000*I)).toCpLocaleString(G))};var d=new Date();var k=d.toString().match(/\(([^\)]+)\)$/);var C=k?" ("+k[1]+")":"";var v=quirksmode=="Opera";var f=[{key:"mimename",label:"&nbsp;",type:"string",sortable:false,width:34,formatter:formatImageCell},{key:"file",label:"Name",sortable:true,formatter:v?formatTxt:l},{key:"humansize",label:"Size",type:"string",sortable:true,width:45,sortOptions:{sortFunction:sortsize}},{key:"mtime",label:"Last Modified"+C,sortable:true,formatter:E,width:110},{key:"mimetype",label:"Type",width:140,sortable:true},{key:"nicemode",label:"Perms",width:36,type:"number",sortable:true,editor:v?null:"textbox"}];window.COLUMN_PADDING_BORDER=21;window.NON_NAME_COLUMN_WIDTHS_TOTAL=f.reduce(function(G,F){if("width" in F){return G+F.width+COLUMN_PADDING_BORDER}return G},18);var r=new YAHOO.util.DataSource();r.responseType=YAHOO.util.DataSource.TYPE_JSARRAY;r.responseSchema={resultNode:"file",resultsList:"files",fields:["mimename","file","humansize","mimetype","nicemode","mtime"]};myDataSource=new YAHOO.util.DataSource(CPANEL.security_token+"/json-api/cpanel?cpanel_jsonapi_module=Fileman&cpanel_jsonapi_func=listfiles&cpanel_jsonapi_apiversion=2&needmime=1&");myDataSource.doBeforeCallback=function(G,F,H){if(F&&F.cpanelresult&&F.cpanelresult.data&&F.cpanelresult.data[0]&&(F.cpanelresult.data)[0].absdir){cwd=(F.cpanelresult.data)[0].absdir}return H};myDataSource.responseType=YAHOO.util.DataSource.TYPE_JSON;myDataSource.responseSchema={resultsList:"cpanelresult.data",fields:[{key:"mimename"},{key:"file",parser:YAHOO.util.DataSource.parseString},{key:"humansize"},{key:"mimetype"},{key:"nicemode"},{key:"mtime"}]};var B=YAHOO.util.Dom.get("filesarea");var c=YAHOO.util.Dom.get("subright");var b=(c.offsetHeight-21-bOffset)+"px";var g=(c.offsetWidth-4-bOffset);var i=g+"px";f[1]["width"]=Math.max(1,g-COLUMN_PADDING_BORDER-NON_NAME_COLUMN_WIDTHS_TOTAL);var p=new YAHOO.widget.ColumnSet(f);filesDataTable=new YAHOO.widget.DataTable("filesarea",p,r,{MSG_EMPTY:"",MSG_LOADING:CPANEL.icons.ajax+" "+LANG.loading,scrollable:true,height:b,width:i,renderLoopSize:200});if(deleteRow_is_picky_yui_2529068){filesDataTable.getTbodyEl()._deleteRow=filesDataTable.getTbodyEl().deleteRow;filesDataTable.getTbodyEl().deleteRow=function(F){if(this.rows.length>0){this._deleteRow(F)}}}filesDataTable.onEventSelectRow=function(F){var G=F.target;if(G.nodeName.toLowerCase()!=="tr"){G=DOM.getAncestorByTagName(G,"tr");if(!G){return}}if(this.isSelected(G)&&this.getSelectedRows().length===1){this.unselectRow(G)}else{arguments.callee.overridee.apply(this,arguments)}};filesDataTable.onEventSelectRow.overridee=YAHOO.widget.DataTable.prototype.onEventSelectRow;filesDataTable.subscribe("postRenderEvent",setupFilesTable);function A(){if(!filesDataTable||!filesDataTable.getHdContainerEl()){window.setTimeout(A,1000);return}var J=YAHOO.util.Dom.get("subright");var I=(J.offsetHeight-21-bOffset)+"px";var G=(J.offsetWidth-4-bOffset);var H=G+"px";var F=filesDataTable.getColumn("file");try{filesDataTable.setColumnWidth(F,G-COLUMN_PADDING_BORDER-NON_NAME_COLUMN_WIDTHS_TOTAL)}catch(K){}filesDataTable.set("width",H);filesDataTable.set("height",I);filesDataTable.validateColumnWidths()}EVENT.addListener(window,"resize",A);filesDataTable.dataSource=myDataSource;var a=function(F){var H=F.target;var G=document.getElementById("renameField");if(G){G.blur()}if(this.isSelected(F.target)){handleRowSelect()}else{handleRowUnSelect(F)}};function D(){myContextMenu.hide()}function e(I){var J=EVENT.getTarget(I);var H=getFilePathFromRow(J);var G=filesDataTable.getRecord(J).getData("mimetype");var F=function(){if(G.match("-directory")||G=="mail"||G=="publichtml"||G=="publicftp"){updateFileList(H)}else{downloadFile(H)}};window.setTimeout(F,100)}function q(I){var H=I.editor.getColumn();var G=I.editor.getRecord();var K=G.getData();if(H.key=="file"){var F=[cwd+"/"+I.oldData];var J=[cwd+"/"+I.newData];if(F[0]!=J[0]){scheduleFileOp("rename",F,J,I.editor.cell.parentNode)}}else{var F=[cwd+"/"+K.file];var J=[];if(I.oldData!=I.newData){scheduleFileOp("chmod",F,J,I.newData)}}}function h(G,F){filesDataTable.activeEditor.container.style.top=filesDataTable.activeEditor.container.offsetTop-document.getElementById("filesarea").scrollTop+"px";filesDataTable.activeEditor.show()}function n(){window.scrollTop=0}filesDataTable.subscribe("columnSortEvent",handleColumnSort);filesDataTable.subscribe("editorSaveEvent",q);filesDataTable.subscribe("cellClickEvent",filesDataTable.onEventShowCellEditor);filesDataTable.subscribe("cellClickEvent",filesDataTable.onEventSelectRow);filesDataTable.subscribe("cellClickEvent",D);filesDataTable.subscribe("rowDblclickEvent",e);filesDataTable.subscribe("rowClickEvent",a);filesDataTable.subscribe("editorShowEvent",n);filesDataTable.subscribe("unselectAllRowsEvent",handleunselectAllRowsEvent);var y=function(G,F,I){var K=this.contextEventTarget;while(K.tagName.toLowerCase()!="tr"){K=K.parentNode;if(K.tagName.toLowerCase=="body"){K=null;break}}if(K){if(!filesDataTable.isSelected(K)){unselectAllFiles();selectFile(K)}var H=this.getItems();for(var J in actionlist){if(actionlist[J].contextmenuitem==null||actionlist[J].contextmenuitem<0){continue}if(actionlist[J].test([K])==1){if(actionlist[J].menabled!=1){actionlist[J].menabled=1;H[actionlist[J].contextmenuitem].cfg.setProperty("disabled",false);H[actionlist[J].contextmenuitem].cfg.setProperty("visible",true);H[actionlist[J].contextmenuitem]._oAnchor.parentNode.style.display=""}}else{if(actionlist[J].menabled!=0){actionlist[J].menabled=0;H[actionlist[J].contextmenuitem].cfg.setProperty("disabled",true);H[actionlist[J].contextmenuitem]._oAnchor.parentNode.style.display="none"}}}}};var u=function(H,G,I){var F=G[1];if(F){if(F.cfg.getProperty("disabled")==true){return}var J=this.contextEventTarget;while(J.tagName.toLowerCase()!="tr"){J=J.parentNode;if(J.tagName.toLowerCase=="body"){J=null;break}}if(J){switch(F.index){case 0:downloadFile(getFilePathFromRow(J));break;case 1:viewFile(getFilePathFromRow(J));break;case 2:actionHandler("edit");break;case 3:actionHandler("codeedit");break;case 4:actionHandler("htmledit");break;case 5:show_panel("move");break;case 6:show_panel("copy");break;case 7:show_panel("rename");break;case 8:show_panel("chmod");break;case 9:show_panel("delete");break;case 10:show_panel("extract");break;case 11:show_panel("compress");break;case 12:dir_uri_action("../htaccess/dohtaccess.html?dir=");break;case 13:dir_uri_action("../htaccess/leechprotect/dohtaccess.html?dir=");break;case 14:dir_uri_action("../indexmanager/dohtaccess.html?dir=");break;default:alert("Event not handled: index:"+F.index+" name:"+F.toString());break}}}};myContextMenu=new YAHOO.widget.ContextMenu("mycontextmenu",{trigger:filesDataTable.getBody()});myContextMenu.addItem("Download").cfg.setProperty("className","menuitem-download");myContextMenu.addItem("View").cfg.setProperty("className","menuitem-view");myContextMenu.addItem("Edit").cfg.setProperty("className","menuitem-edit");myContextMenu.addItem("Code Edit").cfg.setProperty("className","menuitem-codeedit");myContextMenu.addItem("HTML Edit").cfg.setProperty("className","menuitem-htmledit");myContextMenu.addItem("Move").cfg.setProperty("className","menuitem-move");myContextMenu.addItem("Copy").cfg.setProperty("className","menuitem-copy");myContextMenu.addItem("Rename").cfg.setProperty("className","menuitem-rename");myContextMenu.addItem("Change Permissions").cfg.setProperty("className","menuitem-chmod");myContextMenu.addItem("Delete").cfg.setProperty("className","menuitem-delete");myContextMenu.addItem("Extract").cfg.setProperty("className","menuitem-extract");myContextMenu.addItem("Compress").cfg.setProperty("className","menuitem-compress");myContextMenu.addItem("Password Protect").cfg.setProperty("className","menuitem-pass");myContextMenu.addItem("Leech Protect").cfg.setProperty("className","menuitem-leech");myContextMenu.addItem("Manage Indices").cfg.setProperty("className","menuitem-index");myContextMenu.render(document.body);myContextMenu.clickEvent.subscribe(u);myContextMenu.triggerContextMenuEvent.subscribe(y);var x;if(workingdir){x=function(){updateFileList(workingdir)}}else{x=function(){updateFileList(homedir)}}var z=function(){YAHOO.util.Event.onDOMReady(x)};window.setTimeout(z,50);EVENT.addListener(filesDataTable.getBody(),"mousedown",handleSelectBoxMouseDown)}function checkKeys(b){if(b.keyCode==46){var a=filesDataTable.getSelectedTrEls();if(a[0]&&TEXT_FIELD_FOCUS==0){show_panel("delete")}}}function _create_new(f){var c=this.form.path.value;var a=this.form.name.value;var b=CPANEL.security_token+"/json-api/cpanel";var g={success:function(k){try{var h=YAHOO.lang.JSON.parse(k.responseText);if(h.cpanelresult.error){alert("ERROR: "+h.cpanelresult.error)}else{var j=h.cpanelresult.data[0];refreshFiles();if(f){nukeNode(j.path,null)}}}catch(i){alert("AJAX error; please reload this page and try again.");if(window.console){console.log(i,k&&k.responseText)}}}};var e=f?"mkdir":"mkfile";var d="cpanel_jsonapi_module=Fileman&cpanel_jsonapi_func="+e+"&path="+safeencode(c)+"&name="+safeencode(a);YAHOO.util.Connect.asyncRequest("POST",b,g,d)}function create_new_file(){_create_new.call(this)}function create_new_dir(){_create_new.call(this,true)}function handleSubmit(){this.submit()}function handleCancel(){TEXT_FIELD_FOCUS=0;this.cancel();waitpanel.hide()}function handleMove(c){var b=this.getData().movefilepath;if(b===""){b="/"}var a=filesDataTable.getSelectedTrEls().map(getFilePathFromRow);var d=[b];scheduleFileOp("move",a,d,filesDataTable.getSelectedTrEls()[0]);this.hide();return false}function handleDelete(a){deleteFiles();this.hide();return false}function disableEncodings(a){show_panel("encodingsdisabled");var b=document.getElementById(a+"-encodings");if(b){b.style.display="none"}SetNvData("ignorecharencoding",1);if(a=="codeedit"){handleCodeEdit(panels.codeedit.panel)}else{if(a=="textedit"){handleTextEdit(panels.textedit.panel)}}}function handleCodeEdit(a){if(!a||!a.getData){a=this}waitpanel.hide();var b=a.getData();document.getElementById("actionform_temp_charset").value=b.charset;editFile(1,cwd+"/"+b.file);a.hide();return false}function handleSavePrefs(){if(document.getElementById("prefs-ignorecharencoding").checked){if(!NVData.ignorecharencoding){SetNvData("ignorecharencoding",1);DOM.get("codeedit-charset").selectedIndex=0;DOM.get("textedit-charset").selectedIndex=0}}else{if(NVData.ignorecharencoding){SetNvData("ignorecharencoding",0)}}this.hide()}function handleTextEdit(a){if(!a||!a.getData){a=this}waitpanel.hide();var b=a.getData();document.getElementById("actionform_temp_charset").value=b.charset;editFile(0,cwd+"/"+b.file);a.hide();return false}function handleHtmlEdit(b){var a=this.getData();document.getElementById("actionform_charset").value=a.charset;document.getElementById("actionform_baseurl").value=a.url[0];document.getElementById("actionform_basedir").value=a.basedir[0];editFile(2,cwd+"/"+a.file);this.hide();return false}function handleRename(d){TEXT_FIELD_FOCUS=0;var c=this.getData().newname;if(typeof window.force_select!="undefined"){var b=[window.force_select];window.force_select=undefined}else{var b=filesDataTable.getSelectedTrEls()}var a=[getFilePathFromRow(b[0])];var f=[c];scheduleFileOp("rename",a,f,b[0],1);this.hide();return false}function handleChmod(c){var f="0"+this.getData().u+this.getData().g+this.getData().w;var d=[];var b=filesDataTable.getSelectedTrEls();var a=b.map(getFilePathFromRow);scheduleFileOp("chmod",a,d,f,1,b);this.hide();return false}function handleExtract(f){var d=this.getData().extractfilepath;var b=filesDataTable.getSelectedTrEls();var c=getFilePathFromRow(b[0]);show_loading("Extracting Archive","Archive: "+homeicon+c.html_encode()+"<br />Extraction Location: "+homeicon+d.html_encode());var a=[c];var g=[d];scheduleFileOp("extract",a,g);this.hide();return false}function handleCompress(d){var c=this.getData().compressfilepath;var b=this.getData().compresstype||"zip";show_loading("Creating Archive","Archive Location: "+homeicon+c.html_encode());var f=[c];var a=filesDataTable.getSelectedTrEls().map(getFilePathFromRow);scheduleFileOp("compress",a,f,b);this.hide();return false}function handleCopy(c){var b=this.getData().copyfilepath;var d=[b];var a=filesDataTable.getSelectedTrEls().map(getFilePathFromRow);scheduleFileOp("copy",a,d);this.hide();return false}var panels={newfile:{onload:function(){document.getElementById("new-file-name").value=""},panel:null,targetfilepath:"new-file-path",submit:create_new_file,buttons:[{text:"Create New File",isDefault:true},{text:"Cancel"}],successFunc:function(a){refreshFiles()},failFunc:function(a){}},newfolder:{panel:null,onload:function(){document.getElementById("new-folder-name").value=""},targetfilepath:"new-folder-path",submit:create_new_dir,buttons:[{text:"Create New Folder",isDefault:true},{text:"Cancel"}],successFunc:function(h){var c=YAHOO.lang.JSON.parse(h.responseText);try{var f=c.cpanelresult.data[0];if(f.path!==cwd){throw"Directory changed"}var d=f.name;var a=cwd+"/"+d;filesDataTable.subscribe("dataReturnEvent",function b(k){this.unsubscribe("dataReturnEvent",b);var j=k.response.results;var l=0,e=j.length,m;while(l<e&&j[l].file!==d){l++}do{l++}while((m=j[l])&&!/-directory/i.test(m.mimetype));add_path_to_tree(a,m&&m.file)})}catch(g){}refreshFiles()},failFunc:function(a){}},"delete":{panel:null,filelist:"delete-filelist",submit:handleDelete,buttons:[{text:"Delete File(s)",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){}},extract:{panel:null,filelist:"extract-filelist",targetfilepath:"extractfilepath",submit:handleExtract,buttons:[{text:"Extract File(s)",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){}},compress:{panel:null,filelist:"compress-filelist",displaylist:{multiple:"compress-multifile",single:"compress-singlefile"},onload:function(a){setCompressFileName(a)},submit:handleCompress,buttons:[{text:"Compress File(s)",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){}},copy:{panel:null,filelist:"copy-filelist",hasfilelist:"copy-hasfilelist",targetfilepath:"copy-file-path",submit:handleCopy,buttons:[{text:"Copy File(s)",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){}},"search-results":{panel:null,init:function(){var e=[{key:"mimeinfo",label:"&nbsp;",type:"string",sortable:false,width:"32px",formatter:formatImageCellNoCheck},{key:"file",label:"Name",sortable:true,formatter:formatSearchFile}];var d=[{mimeinfo:"",file:""}];var a=new YAHOO.util.DataSource(d);var c=new YAHOO.widget.ColumnSet(e);var b=YAHOO.util.Dom.get("search-results-div");searchDataTable=new YAHOO.widget.DataTable(b,c,a,{scrollable:true,height:"280px",width:"460px"});if(deleteRow_is_picky_yui_2529068){searchDataTable.getTbodyEl()._deleteRow=searchDataTable.getTbodyEl().deleteRow;searchDataTable.getTbodyEl().deleteRow=function(f){if(this.rows.length>0){this._deleteRow(f)}}}searchDataTable.subscribe("rowDblclickEvent",handleSearchDblClick)},buttons:[{text:"Close",handler:handleCancel,isDefault:true}],successFunc:function(a){},failFunc:function(a){},onunload:function(){document.getElementById("search-results-div").style.display="none";nukeSearchResults()}},move:{panel:null,filelist:"move-filelist",hasfilelist:"move-hasfilelist",targetfilepath:"move-file-path",submit:handleMove,buttons:[{text:"Move File(s)",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){}},rename:{panel:null,file:"rename-file",newfile:"rename-newfile",hasfile:"rename-hasfile",singlefilelist:"rename-filelist",targetfilepath:"rename-dir",submit:handleRename,buttons:[{text:"Rename File",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){},onload:function(){TEXT_FIELD_FOCUS=1;if(quirksmode=="Opera"){document.getElementById("rename-dyanmic-hide").style.display="none";document.getElementById("rename-dyanmic-hide2").style.display="none"}}},codeedit:{panel:null,file:"codeedit-file",hasfile:"codeedit-hasfile",singlefilelist:"codeedit-filelist",targetfilepath:"codeedit-dir",submit:handleCodeEdit,buttons:[{text:"Edit",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){}},textedit:{panel:null,file:"textedit-file",hasfile:"textedit-hasfile",singlefilelist:"textedit-filelist",targetfilepath:"textedit-dir",submit:handleTextEdit,buttons:[{text:"Edit",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){}},encodingsdisabled:{panel:null,submit:function(){this.cancel()},buttons:[{text:"Ok",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){}},prefs:{panel:null,submit:handleSavePrefs,buttons:[{text:"Save",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){},onload:function(){if(self.NVData){document.getElementById("prefs-ignorecharencoding").checked=(NVData.ignorecharencoding?true:false)}}},htmledit:{panel:null,file:"htmledit-file",hasfile:"htmledit-hasfile",singlefilelist:"htmledit-filelist",targetfilepath:"htmledit-dir",submit:handleHtmlEdit,buttons:[{text:"Edit",isDefault:true},{text:"Cancel"}],successFunc:function(a){},failFunc:function(a){}},chmod:{file:"chmod-file",targetfilepath:"chmod-dir",filelist:"chmod-filelist",panel:null,submit:handleChmod,buttons:[{text:"Change Permissions",isDefault:true},{text:"Cancel"}],onload:function(k){if(!k[0]){return}var a="x"+filesDataTable.getRecord(k[0]).getData("nicemode");var m=a.substr(2,1);var i=a.substr(3,1);var l=a.substr(4,1);var e=(m==4||m==5||m==6||m==7)?1:0;var c=(m==2||m==3||m==6||m==7)?1:0;var b=(m==1||m==3||m==5||m==7)?1:0;var d=(i==4||i==5||i==6||i==7)?1:0;var p=(i==2||i==3||i==6||i==7)?1:0;var n=(i==1||i==3||i==5||i==7)?1:0;var j=(l==4||l==5||l==6||l==7)?1:0;var h=(l==2||l==3||l==6||l==7)?1:0;var f=(l==1||l==3||l==5||l==7)?1:0;document.fmode.ur.checked=e;document.fmode.uw.checked=c;document.fmode.ux.checked=b;document.fmode.gr.checked=d;document.fmode.gw.checked=p;document.fmode.gx.checked=n;document.fmode.wr.checked=j;document.fmode.ww.checked=h;document.fmode.wx.checked=f;calcperm()},successFunc:function(a){refreshFiles()},failFunc:function(a){}}};function init_panels(d){if(inited_panels[d]){return}inited_panels[d]=1;for(var c in panels){if(c!=d){continue}var g=document.getElementById(c);if(!g){continue}g.style.display="";var e={width:"500px",fixedcenter:true,modal:true,visible:false,draggable:true,close:true,constraintoviewport:true,postmethod:"manual",effect:{effect:CPANEL.animate.ContainerEffect.FADE_MODAL,duration:0.25},buttons:panels[c].buttons};for(var a=0,f;f=e.buttons[a];a++){if(!("handler" in f)){f.handler=f.isDefault?handleSubmit:handleCancel}}panels[c].panel=new YAHOO.widget.Dialog(c,e);panels[c].panel.callback={success:panels[c].successFunc,failure:panels[c].failFunc};if("submit" in panels[c]){panels[c].panel.manualSubmitEvent.subscribe(panels[c].submit)}if(c=="codeedit"){panels[c].panel.hideEvent.subscribe(function(){waitpanel.hide()})}if(panels[c].onunload){panels[c].panel.beforeHideEvent.subscribe(panels[c].onunload,panels[c].panel,true)}panels[c].panel.beforeHideEvent.subscribe(panel_cleanup,panels[c],true);if(panels[c].init){panels[c].init()}}}function panel_cleanup(a){if(this.filelist){document.getElementById(this.filelist).innerHTML=""}}function getRelPath(c,b,a){if(!a){a=0}return c.substring(homedir.length+a)}function init_simple_panels(){resultspanel=new YAHOO.widget.Dialog("resultspanel",{width:"700px",fixedcenter:true,close:true,draggable:true,modal:true,buttons:closeButtons,visible:false});resultspanel.beforeHideEvent.subscribe(function(){this.setBody("")},resultspanel,true);waitpanel=new YAHOO.widget.Panel("waitpanel",{fixedcenter:true,close:false,draggable:false,modal:true,visible:false})}function show_results(b,a){resultspanel.setHeader(b);resultspanel.setBody('<div style="height: 350px; overflow:auto;"><pre>'+a+"</pre></div>");resultspanel.render(document.body);resultspanel.show()}function show_loading(c,a){waitpanel.setHeader("&nbsp;"+c+"&nbsp;");var b='<img src="img/yui/rel_interstitial_loading.gif" />';if(a){waitpanel.setBody(a+"<br />"+b)}else{waitpanel.setBody(b)}waitpanel.render(document.body);waitpanel.show()}function showPrefs(){show_panel("prefs")}function show_panel(t,r,i){init_panels(t);safecwd=cwd.substring(homedir.length);if(i!==undefined){var a=[i];window.force_select=i}else{var a=filesDataTable.getSelectedTrEls();if(typeof window.force_select!==undefined){window.force_select=undefined}}if(panels[t].file&&a[0]){var d=getFilePathFromRow(a[0]);d=d.split("/").pop();document.getElementById(panels[t].file).value=d;if(panels[t].newfile){document.getElementById(panels[t].newfile).value=d}}if(panels[t].targetfilepath){document.getElementById(panels[t].targetfilepath).value=safecwd}if(panels[t].singlefilelist&&a[0]){document.getElementById(panels[t].singlefilelist).innerHTML=getRelPath(getFilePathFromRow(a[0])).html_encode();document.getElementById(panels[t].singlefilelist).className="dispfile dispfileContainer";var e=document.getElementById(panels[t].hasfile);if(e){e.style.display="block"}panels[t].panel.cfg.queueProperty("buttons",panels[t].buttons)}else{if(panels[t].singlefilelist){panels[t].panel.cfg.queueProperty("buttons",closeButtons)}}if(panels[t].filelist&&a[0]){var p=[];var k;var j=document.getElementById(panels[t].filelist);j.className="dispfileContainer";j.innerHTML="";var g;var u=0;var n=a.length;for(var q=0;q<n;q++){var s=a[q];var m=getRelPath(getFilePathFromRow(s)).html_encode();var h=document.createElement("div");h.innerHTML=m;h.className="dispfile";j.appendChild(h);u++;if(!g){g=h.offsetHeight}}if(!g){g=14}var b=((g*u)+2);if(b<200){j.style.height=b+"px";j.style.overflow="hidden"}else{j.style.height=200+"px";j.style.overflow="auto"}var l=document.getElementById(panels[t].hasfilelist);if(l){l.style.display="block"}panels[t].panel.cfg.queueProperty("buttons",panels[t].buttons)}else{if(panels[t].filelist){panels[t].panel.cfg.queueProperty("buttons",closeButtons)}}if(panels[t].displaylist){var c=filesDataTable.getRecord(a[0]).getData("mimetype");if((c.match("-directory")||c=="mail"||c=="publichtml"||c=="publicftp")||a[1]){document.getElementById(panels[t].displaylist.multiple).style.display="block";document.getElementById(panels[t].displaylist.single).style.display="none"}else{document.getElementById(panels[t].displaylist.multiple).style.display="none";document.getElementById(panels[t].displaylist.single).style.display="block"}}if(panels[t].onload){panels[t].onload(a)}if(r){panels[t].panel.cfg.queueProperty("modal",false)}panels[t].panel.render();panels[t].panel.show()}function getfilesAreaScrollableEl(){var a=filesDataTable.getBdContainerEl();if(!a.id){a.id="filesarea_scrollable"}return a}function handleSelectBoxMouseDown(d){var c=YAHOO.util.Event.getPageX(d);var b=YAHOO.util.Event.getPageY(d);var f=getfilesAreaScrollableEl();if(quirksmode=="MSIE"){document.onselectstart=new Function("return false;")}var a=document.getElementById("index");if(quirksmode=="Safari"||quirksmode=="Safari5"){a.style.KhtmlUserSelect="none"}if(quirksmode=="Mozilla"){a.style.MozUserSelect="none";f.style.MozUserSelect="none"}selectWindowRegion=YAHOO.util.Region.getRegion(f);selectMode=1;selectEl=document.getElementById("select");selectorEl=f;selector=f.id;selectStartScrollLeft=f.scrollLeft;selectStartScrollTop=f.scrollTop;selectStartX=c;selectStartY=b;EVENT.addListener(document,"mousemove",handleSelectBoxMove,this,true);EVENT.addListener(document,"mouseup",handleSelectBoxUp,this,true);EVENT.addListener(f,"scroll",handleSelectBoxMove,this,true);return false}function rebuildLocCache(){locCache={};var a=filesDataTable.getRows();for(var b=0;b<a.length;b++){locCache[a[b].id]=YAHOO.util.Region.getRegion(a[b])}}function handleSelectBoxUp(b){if(!selectMode){return}if(selectMode==2){handleSelections()}selectMode=0;var f=selectorEl;var d=getfilesAreaScrollableEl();EVENT.removeListener(document,"mouseup",handleSelectBoxUp);EVENT.removeListener(document,"mousemove",handleSelectBoxMove);EVENT.removeListener(d,"scroll",handleSelectBoxMove);var a=document.getElementById("index");var d=getfilesAreaScrollableEl();if(quirksmode=="MSIE"){document.onselectstart=new Function("return true;")}if(quirksmode=="Safari"||quirksmode=="Safari5"){a.style.KhtmlUserSelect=""}if(quirksmode=="Mozilla"){a.style.MozUserSelect="";d.style.MozUserSelect=""}var c=document.getElementById("select");c.style.display="none";c=null}function handleSelectBoxMove(E){if(!selectMode){return false}if(!selectEl){return}var s=YAHOO.util.Event.getPageX(E);var n=YAHOO.util.Event.getPageY(E);if(selectMode==1&&(Math.abs(n-selectStartY)>2||Math.abs(s-selectStartX)>2)){selectMode=2;selectEl.style.left=s+"px";selectEl.style.top=n+"px";selectEl.style.width=0+"px";selectEl.style.height=0+"px";selectEl.style.display="block";myContextMenu.hide();if(!AltKeyPressed){unselectAllFiles()}rebuildLocCache();viewportHeight=YAHOO.util.Dom.getViewportHeight();for(var y in selectOvers){delete selectOvers[y]}}if(selectMode!=2){return}YAHOO.util.Event.preventDefault(E);if(s==0){s=lastX}else{lastX=s}if(n==0){n=lastY}else{lastY=n}var p=selectorEl;var l=(p.scrollLeft-selectStartScrollLeft);var k=(p.scrollTop-selectStartScrollTop);var d=selectWindowRegion.left;var F=selectWindowRegion.top;var f=selectWindowRegion.right;var j=selectWindowRegion.bottom;var G=(f-d);var t=(j-F);var a,r,h,c;if(n+k>selectStartY){a=selectStartY-k;r=n}else{a=n;r=selectStartY-k}if(s+l>selectStartX){h=selectStartX-l;c=s}else{h=s;c=selectStartX-l}var D=r;var u=a;var w=h;var v=c;if(D>j){D=j+2;selectEl.style.borderBottom=""}else{selectEl.style.borderBottom="solid 2px #33c"}if(u<F){u=F-2;selectEl.style.borderTop=""}else{selectEl.style.borderTop="solid 2px #33c"}if(w<d){w=d-2;selectEl.style.borderLeft=""}else{selectEl.style.borderLeft="solid 2px #33c"}if(v>f){v=f+2;selectEl.style.borderRight=""}else{selectEl.style.borderRight="solid 2px #33c"}if(D<u){D=u+2}if(v<w){v=w+2}selectEl.style.left=w+"px";selectEl.style.top=u+"px";selectEl.style.width=(v-w)+"px";selectEl.style.height=(D-u)+"px";a+=k;r+=k;h+=l;c+=l;var C=new YAHOO.util.Region(a,c,r,h);var g={};var m=[];var B=[];var y;var z;for(var y in selectOvers){var q=selectOvers[y];if(!q){continue}if(!C.intersect(q)){m.push(y)}g[y]=true;delete selectOvers[y]}for(y in locCache){var q=locCache[y];if(!q){continue}if(C.intersect(q)){if(!g[y]){B.push(y)}selectOvers[y]=q}}z=m.length;for(y=0;y<z;y++){unselectFile(m[y]);handleRowUnSelect({target:m[y]})}z=B.length;for(y=0;y<z;y++){selectFile(B[y],1);handleRowSelect()}var A=10;if(quirksmode=="Safari"||quirksmode=="Safari5"){A=38;var x=new Date();var b=x.getTime();if((lastSelectTime+100)<b){lastSelectTime=b}else{x=null;b=null;return false}x=null}setmoveEvent();if(F>n){scrollDiv(p,1,A)}else{if(viewportHeight-10<n){scrollDiv(p,0,A)}}return false}function setmoveEvent(a){a==2?moveEvent=0:moveEvent=1}function scrollDiv(b,d,e){if(e==null){e=12}var c=0;var a=(b.scrollHeight-b.offsetHeight);if(quirksmode=="MSIE"){a=b.scrollHeight}if(d==1){if(b.scrollTop>e){b.scrollTop-=e;c=1}else{if(b.scrollTop==0){c=0}else{b.scrollTop=0}}}else{if(d==0){if(b.scrollTop<(a-e)){b.scrollTop+=e;c=1}else{if(a==b.scrollTop){c=0}else{b.scrollTop=a;c=1}}}}return c}function setupKeyL(){var a=function(d){var c=d.charCode||d.keyCode;if(d.metaKey||d.AltKey||c==224||c==18){AltKeyPressed=0}if(d.ctrlKey||d.shiftKey||c==17||c==16){SVis=0;CtrlKeyPressed=0;document.getElementById("copyi").style.display="none"}};var b=function(d){var c=d.charCode||d.keyCode;if(d.metaKey||d.AltKey||c==224||c==18){AltKeyPressed=1}if(d.ctrlKey||d.shiftKey||c==17||c==16){CtrlKeyPressed=1}};EVENT.on(window,"keyup",a);EVENT.on(window,"keydown",b)}function getRegion(f){if((quirksmode=="Safari"||quirksmode=="Safari5")&&f.cells&&f.cells[0]){var h=YAHOO.util.Dom.getXY(f.cells[0]);var e=h[1];var g=h[0];for(var d=0;d<f.cells.length;d++){g+=f.cells[d].offsetWidth}var a=h[1]+f.cells[0].offsetHeight;var c=h[0];return new YAHOO.util.Region(e,g,a,c)}return YAHOO.util.Region.getRegion(f)}function dosearch(b,e){init_panels("search-results");var c=document.getElementById(b);var a=document.getElementById(e);var d=a.value;var f=c.options[c.selectedIndex].value;if(f=="$cwd"){f=cwd}else{f=homedir+"/"+f}f=getRelPath(f);show_loading("Searching files","Location: "+homeicon+f.html_encode()+"<br />Search Regex: "+d.html_encode());if(!searchDataSource){searchDataSource=new YAHOO.util.DataSource(CPANEL.security_token+"/json-api/cpanel?cpanel_jsonapi_module=Fileman&cpanel_jsonapi_func=search&cpanel_jsonapi_apiversion=2&")}searchDataSource.responseType=YAHOO.util.DataSource.TYPE_JSON;searchDataSource.responseSchema={resultsList:"cpanelresult.data",fields:["mimeinfo","file"]};searchDataTable.dataSource=searchDataSource;searchDataTable.clearRows();searchDataTable.showTableMessage(YAHOO.widget.DataTable.MSG_LOADING,YAHOO.widget.DataTable.CLASS_LOADING);CPANEL.util.set_text_content("search-for",d);searchDataSource.sendRequest("regex="+safeencode(d)+"&dir="+safeencode(f),searchDataTable.onDataReturnSearch,searchDataTable)}function nukeSearchResults(){if(searchDataTable){searchDataTable.getRecordSet().reset();searchDataTable.clearRows()}}function getMimeTypeFromImage(b){var c=b.split("/");var a=c.pop();return a.replace(/\.png$/,"")}function handleSearchDblClick(f){var g=EVENT.getTarget(f);var a=searchDataTable.getRecord(g).getData();var d=a.file;var c=a.mimeinfo;var h=g.cells[0].getElementsByTagName("img");var c=h&&h[0]&&getMimeTypeFromImage(h[0].src);var b=function(){if(c.match("-directory")||c=="mail"||c=="publichtml"||c=="publicftp"){updateFileList(d)}else{var e=d.split("/").slice(0,-1).join("/")||"/";updateFileList(e)}panels["search-results"].panel.hide()};window.setTimeout(b,100)}function searchFailed(a){waitpanel.hide();alert("There was an unknown problem during the search.")}function dir_uri_action(b){var a=filesDataTable.getSelectedTrEls();document.getElementById("actionform").action=b;document.getElementById("actionform_file").value="";document.getElementById("actionform_dir").value=getFilePathFromRow(a[0]);document.getElementById("actionform").submit()}function isArray(a){if(a.length>0){if(!a[0]||(a[0]&&a[0].length==1)){return false}return true}return false}function sortsize(d,k,f){if(!YAHOO.lang.isValue(d)){return(!YAHOO.lang.isValue(k))?0:1}else{if(!YAHOO.lang.isValue(k)){return -1}}var j=d.getData("humansize");var h=k.getData("humansize");var e=j.split(/\s+/);var c=unit_to_bytes(e[0],e[1]);if(isNaN(c)){c=0}var i=h.split(/\s+/);var g=unit_to_bytes(i[0],i[1]);if(isNaN(g)){g=0}return(f?g-c:c-g)}function unit_to_bytes(b,a){switch(a){case"KB":return parseFloat(b)*1024;case"MB":return parseFloat(b)*1024*1024;case"GB":return parseFloat(b)*1024*1024*1024;case"TB":return parseFloat(b)*1024*1024*1024*1024;case"PB":return parseFloat(b)*1024*1024*1024*1024*1024;default:return parseFloat(b)}}function load_docroots(){if(loaded_docroots){return}var a=function(c){for(var b=0;b<c.length;b++){var e=c[b].docroot;var d=c[b].domain;web_docroots[d]=e}loaded_docroots=1};cpanel_jsonapi2(a,"DomainLookup","getdocroots")}function populate_charset(b){b.options.length=0;b.add(new Option(LANG.auto_detect,"_DETECT_"),undefined);for(var a=0;a<charmaps.length;a++){b.add(new Option(charmaps[a]),undefined)}}function select_charset(b,d){var c=d.toLowerCase();if(/^us-?ascii$/i.test(c)){c="utf-8"}else{if(/^(?:latin|iso-?8859)-?1$/i.test(c)){c="windows-1252"}}for(var a=0;a<b.options.length;a++){if(b.options[a].value==c){b.selectedIndex=a;break}}}function toggleTextFieldFocus(b,a){if(a==0){TEXT_FIELD_FOCUS=0}if(a==1){TEXT_FIELD_FOCUS=1}}function initialize(){upgradeFm();setupKeyL();init_simple_panels();EVENT.on(document,"keyup",checkKeys);EVENT.addFocusListener(["location","searchbox"],toggleTextFieldFocus,1);EVENT.addBlurListener(["location","searchbox"],toggleTextFieldFocus,0)}EVENT.onDOMReady(initialize);var isWebMail=0;var NVData_pending=0;function DidSetNvData(c,b){NVData_pending=0;if(!c){alert("Invalid json response from json-api: "+o.responseText);return}for(var a=0;a<c.length;a++){if(c[a].set==null){alert("Invalid Data in response from json-api: "+o.responseText);continue}if(b!=null){b(c[a].set)}}}function FailSetNvData(a){}function SetNvData(a,c,e,b){var d=function(f){DidSetNvData(f,e)};if(typeof(window.cpanel_jsonapi2)=="undefined"){alert("You must load jsonapi.js before using SetNvData into this page: "+window.location.href)}cpanel_jsonapi2(d,"NVData","set","names",a,a,c,"__nvdata::nocache",(b?1:0));NVData_pending=1;NVData[a]=c}function GotNvData(c,b){if(!c){alert("Invalid json response from json-api NVData get");return}if(!b){alert("GetNvData call is missing a callback function on: "+window.location.href);return}for(var a=0;a<c.length;a++){if(!c[a].name){alert("Invalid Data in response from NVData get");continue}var d="";if(c[a].value){d=c[a].value}b(c[a].name,unescape(d))}}function FailGetNvData(a){}function GetNvData(a,c){var b=function(d){GotNvData(d,c)};if(typeof(window.cpanel_jsonapi2)=="undefined"){alert("You must load jsonapi.js before using SetNvData into this page: "+window.location.href)}cpanel_jsonapi2(b,"NVData","get","names",a)}function SetCookie(b,c,a,d){document.cookie=b+"="+escape(c)+((a)?("; expires="+a.toGMTString()):"")+((d)?("; path="+d):"")}function GetCookie(d){var b=document.cookie;var c=d+"=";var a=b.length;var e=0;while(e<a){var g=e+c.length;if(b.substring(e,g)==c){var f=b.indexOf(";",g);if(f==-1){f=a}return unescape(b.substring(g,f))}e=b.indexOf(" ",e)+1;if(e==0){break}}return null}function include_dom(a){var b=document.getElementsByTagName("head").item(0);var c=document.createElement("script");c.setAttribute("language","javascript");c.setAttribute("type","text/javascript");c.setAttribute("src",a);b.appendChild(c);return false}function cpanel_jsonapi1(){var g=cpanel_jsonapi1.arguments;var b=g[0];var a=g[1];var c=g[2];var d=g.length;var j={success:cpanel_jsonapi1_parser,failure:b,argument:b};var h="cpanel_jsonapi_module="+encodeURIComponent(a)+"&cpanel_jsonapi_func="+encodeURIComponent(c)+"&cpanel_jsonapi_apiversion=1";var f=0;for(var e=3;e<d;e++){h+="&arg-"+f+"="+encodeURIComponent(g[e]);f++}if(h.length<2000){YAHOO.util.Connect.asyncRequest("GET",CPANEL.security_token+"/json-api/cpanel?"+h,j)}else{YAHOO.util.Connect.asyncRequest("POST",CPANEL.security_token+"/json-api/cpanel",j,h)}}function cpanel_jsonapi1_parser(c){var b=c.argument;var a=fastJsonParse(c.responseText);if(b){b(a.cpanelresult.data.result)}}function cpanel_jsonapi2(){var a=cpanel_jsonapi2.arguments;var f=a[0];var c=a[1];var d=a[2];var g=a.length;var h={success:cpanel_jsonapi2_parser,failure:f,argument:f};var e="cpanel_jsonapi_module="+encodeURIComponent(c)+"&cpanel_jsonapi_func="+encodeURIComponent(d)+"&cpanel_jsonapi_apiversion=2";for(var b=3;b<g;b+=2){e+="&"+encodeURIComponent(a[b])+"="+encodeURIComponent(a[b+1])}if(e.length<2000){YAHOO.util.Connect.asyncRequest("GET",CPANEL.security_token+"/json-api/cpanel?"+e,h)}else{YAHOO.util.Connect.asyncRequest("POST",CPANEL.security_token+"/json-api/cpanel",h,e)}}function cpanel_jsonapi2_parser(c){var b=c.argument;var a=fastJsonParse(c.responseText);if(b){b(a.cpanelresult.data)}}var use_fast_proto=1;function cpanel_api1(){var g=cpanel_api1.arguments;var b=g[0];var a=g[1];var c=g[2];var d=g.length;var j={success:cpanel_api1_parser,argument:b};var h;if(use_fast_proto){h="cpanel_xmlapi_module="+encodeURIComponent(a)+"&cpanel_xmlapi_func="+encodeURIComponent(c)+"&cpanel_xmlapi_apiversion=1";var f=0;for(var e=3;e<d;e++){h+="&arg-"+f+"="+encodeURIComponent(g[e]);f++}}else{h="xmlin=<cpanelaction><apiversion>1</apiversion><module>"+a+"</module><func>"+c+"</func>";for(var e=3;e<d;e++){h+="<args>"+g[e]+"</args>"}h+="</cpanelaction>"}if(h.length<2000){YAHOO.util.Connect.asyncRequest("GET",CPANEL.security_token+"/xml-api/cpanel?"+h,j)}else{YAHOO.util.Connect.asyncRequest("POST",CPANEL.security_token+"/xml-api/cpanel",j,h)}}function cpanel_api1_parser(g){var f=g.argument;var c=g.responseXML;var b=c.getElementsByTagName("cpanelresult")[0];var d=b.getElementsByTagName("data")[0];var a=d.getElementsByTagName("result")[0];var e;if(a.firstChild){e=a.firstChild.nodeValue}if(f){f(e)}}function cpanel_api2(){var a=cpanel_api2.arguments;var f=a[0];var c=a[1];var d=a[2];var g=a.length;var h={success:cpanel_api2_parser,argument:f};var e;if(use_fast_proto){e="cpanel_xmlapi_module="+encodeURIComponent(c)+"&cpanel_xmlapi_func="+encodeURIComponent(d)+"&cpanel_xmlapi_apiversion=2";for(var b=3;b<g;b+=2){e+="&"+encodeURIComponent(a[b])+"="+encodeURIComponent(a[b+1])}}else{e="xmlin=<cpanelaction><apiversion>2</apiversion><module>"+c+"</module><func>"+d+"</func><args>";for(var b=3;b<g;b+=2){e+="<"+a[b]+">"+a[b+1]+"</"+a[b]+">"}e+="</args></cpanelaction>"}if(e.length<2000){YAHOO.util.Connect.asyncRequest("GET",CPANEL.security_token+"/xml-api/cpanel?"+e,h)}else{YAHOO.util.Connect.asyncRequest("POST",CPANEL.security_token+"/xml-api/cpanel",h,e)}}function cpanel_api2_parser(e){var d=e.argument;var b=e.responseXML;var a=b.getElementsByTagName("cpanelresult")[0];var c=a.getElementsByTagName("data");if(d){d(c)}};