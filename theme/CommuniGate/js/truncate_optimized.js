var maxwidth=710;var truncate_fontsize=11;var quirksmode="Mozilla";if(navigator.appVersion.indexOf("Safari")!=-1){quirksmode="Safari"}if(navigator.appVersion.indexOf("MSIE")!=-1){quirksmode="MSIE"}if(navigator.appVersion.indexOf("Opera")!=-1||navigator.userAgent.indexOf("Opera")!=-1){quirksmode="Opera"}function getRegion(f){if(quirksmode=="Safari"&&f.cells&&f.cells[0]){var h=YAHOO.util.Dom.getXY(f.cells[0]);var e=h[1];var g=h[0];for(var d=0;d<f.cells.length;d++){g+=f.cells[d].offsetWidth}var a=h[1]+f.cells[0].offsetHeight;var c=h[0];return new YAHOO.util.Region(e,g,a,c)}return YAHOO.util.Region.getRegion(f)}var truncate_on=0;var truncate_tooltips=0;var truncate_wrap=1;var truncate_start_row=1;var truncatetables=[];var truncatetableids=[];function post_register_truncate_tables(){for(var c=0;c<truncatetableids.length;c++){var b=document.getElementById(truncatetableids[c]);if(!b){alert("truncate.js: Table not found "+truncatetableids[c])}else{truncate_on=1;var a=0;for(var c=0;c<truncatetables.length;c++){if(truncatetables[c].id==b.id){a=1}}if(!a){truncatetables.push(b)}}}}function register_truncate_table(a){truncatetableids.push(a)}function truncater(){post_register_truncate_tables();if(!truncate_on){return}var a=0;var v=1.5;if(!truncatetables){return}for(var l=0;l<truncatetables.length;l++){if(truncatetables[l].rows.length>1000){continue}var n=0;if(truncatetables[l].getAttribute("fixedtruncate")){n=1}var c=truncatetables[l].rows;var q=getRegion(c[0]);var w=(q.right-q.left);for(var u=truncate_start_row;u<c.length;u++){if(!n&&w<maxwidth){continue}var o=0;var h=[];var s=[];for(var r=0;r<c[u].cells.length;r++){if(!YAHOO.util.Dom.hasClass(c[u].cells[r],"truncate")){var b=c[u].cells[r].offsetWidth;if(b&&!isNaN(b)){o+=b}}else{h.push({row:c[u].cells[r],fixed:c[u].cells[r].getAttribute("truncatefixed"),percent:c[u].cells[r].getAttribute("truncate")})}}var e=(maxwidth-o);var y=parseInt(c[u].style.fontSize)||truncate_fontsize;for(var r=0;r<h.length;r++){var z;var f;if(h[r].fixed){f=parseInt(h[r].fixed)}else{var x=h[r].percent;if(!x){x=100/h.length}var m=e*(x/100);f=parseInt(m/(y/v))}z=getFirstTextNode(h[r].row);if(!z){continue}cellText=z.nodeValue;if(!cellText){continue}if(f+2>=cellText.length){continue}if(f<17){f=17}h[r].row.removeAttribute("nowrap");var g=document.createElement("span");g.innerHTML=break_text(cellText,f,truncate_wrap);var k=z.parentNode;k.removeChild(z);k.appendChild(g);while(g.offsetWidth>e&&f>17){f--;if(f<4){break}g.innerHTML=break_text(cellText,f,truncate_wrap)}if(truncate_tooltips){var p=document.createElement("img");p.src="/frontend/"+thisTheme+"/images/arrow-right.gif";p.style.display="inline";p.setAttribute("title",cellText);h[r].row.appendChild(p);a++;var d=new YAHOO.widget.Tooltip("truncate_tt"+a,{context:p,text:cellText})}}}}}function getFirstTextNode(c){var a=c.childNodes.length;for(var b=0;b<a;b++){switch(c.childNodes[b].nodeType){case 1:var d=getFirstTextNode(c.childNodes[b]);if(d){return d}break;case 3:return c.childNodes[b];break}}}function break_text(a,d,e){var c=0;var b="";if(d<4){return a}while(1){b+=a.substr(c,d);if(e){c+=d;if(c>=a.length||c>4096){break}b+="<br />"}else{break}}if(e){b+=" "}return b}YAHOO.util.Event.onDOMReady(truncater);