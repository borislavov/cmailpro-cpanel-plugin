var build_progress_bar=function(b){var d=YAHOO.util.Dom.getElementsByClassName("cpanel_widget_progress_bar_percent","div",b);for(var a in d){var c=d[a].innerHTML;if(CPANEL.validate.positive_integer(c)){CPANEL.widgets.progress_bar(b,c,"",'{"inverse_colors":"true"}')}}};var build_progress_bars=function(a){YAHOO.util.Dom.getElementsByClassName("stats_progress_bar","div",a,build_progress_bar)};var destroy_progress_bars=function(a){YAHOO.util.Dom.getElementsByClassName("cpanel_widget_progress_bar","div",a,function(b){YAHOO.util.Dom.get(b).innerHTML=""})};var fetch_extended_stats=function(){YAHOO.util.Dom.setStyle("toggle_extended_stats","display","none");YAHOO.util.Dom.setStyle("extended_stats_loading_icon","display","block");YAHOO.util.Dom.get("extended_stats_loading_icon").innerHTML=CPANEL.icons.ajax+" loading...";var a={success:function(b){YAHOO.util.Dom.get("extended_stats").innerHTML=b.responseText;build_progress_bars("stats_extended");expand_extended_stats()},failure:function(b){YAHOO.util.Dom.get("extended_stats_loading_icon").innerHTML="";YAHOO.util.Dom.setStyle("toggle_extended_stats","display","block");YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="AJAX Failure: click to try again"},timeout:3000};YAHOO.util.Connect.asyncRequest("GET","extended_statsbar.html?secpolicy_ui=no&rowcounter=mainstats&rowcountervalue="+ROWCOUNTER.mainstats,a,null)};var finish_expand_extended_stats=function(){if(YAHOO.env.ua.ie>5&&YAHOO.env.ua.ie<8){build_progress_bars("stats_extended")}YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="collapse stats";YAHOO.util.Dom.setStyle("toggle_extended_stats","display","");YAHOO.util.Dom.setStyle("extended_stats_loading_icon","display","none");YAHOO.util.Dom.replaceClass("toggle_extended_stats_img","box-expand-control","box-collapse-control");SetNvData("xstatscollapsed","expanded");YAHOO.util.Dom.get("extended_stats_state").innerHTML="shown"};var expand_extended_stats=function(){YAHOO.util.Dom.get("extended_stats_state").innerHTML="animating";YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="";var b=CPANEL.animate.getAutoHeight("extended_stats");YAHOO.util.Dom.setStyle("extended_stats","height","0px");YAHOO.util.Dom.setStyle("extended_stats","display","block");var a={height:{to:b,units:"px"}};var c=new YAHOO.util.Anim("extended_stats",a,"0.5",YAHOO.util.Easing.easeOutStrong);c.onComplete.subscribe(finish_expand_extended_stats);c.animate()};var finish_hide_extended_stats=function(){YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="expand stats";YAHOO.util.Dom.replaceClass("toggle_extended_stats_img","box-collapse-control","box-expand-control");SetNvData("xstatscollapsed","collapsed");YAHOO.util.Dom.get("extended_stats_state").innerHTML="hidden"};var hide_extended_stats=function(){if(YAHOO.env.ua.ie>5&&YAHOO.env.ua.ie<8){destroy_progress_bars("extended_stats")}YAHOO.util.Dom.get("extended_stats_state").innerHTML="animating";YAHOO.util.Dom.get("toggle_extended_stats").innerHTML="";var a={height:{to:"0",units:"px"}};var b=new YAHOO.util.Anim("extended_stats",a,"0.5",YAHOO.util.Easing.easeOutStrong);b.onComplete.subscribe(finish_hide_extended_stats);b.animate()};var toggle_extended_stats=function(){YAHOO.util.Dom.get("toggle_extended_stats").blur();var a=YAHOO.util.Dom.get("extended_stats_state").innerHTML;if(a=="hidden"){if(YAHOO.util.Dom.get("extended_stats").innerHTML==""){fetch_extended_stats()}else{expand_extended_stats()}}else{if(a=="shown"){hide_extended_stats()}}};var init_extended_stats=function(){YAHOO.util.Event.on("toggle_extended_stats","click",function(a){YAHOO.util.Event.preventDefault(a)});YAHOO.util.Event.on(["toggle_extended_stats","stats-header"],"click",toggle_extended_stats);build_progress_bars("content-stats");register_interfacecfg_nvdata("xstatscollapsed");if(NVData.xstatscollapsed=="expanded"&&YAHOO.util.Dom.get("extended_stats").innerHTML==""){fetch_extended_stats()}};