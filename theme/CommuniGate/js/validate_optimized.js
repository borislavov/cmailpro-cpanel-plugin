var validate_data_panel_initted=0;var validate_data_panel;var realtime_validate_inited={};var cached_url_depth;var validate_working_form;var valImgs=[];var validateElMap={};var check_elements={};var match_validators={fullemailaddress:eval("/^([a-zA-Z0-9_'+*$%^&!.-])+[@+](([a-zA-Z0-9-])+.)+([a-zA-Z0-9:]{2,4})+$/"),emailcharplus:eval("/^([a-zA-Z0-9_'+.-])/"),emailaddress:/^[^\@]\@[^\.]\./,emailchars:/^[a-z0-9\_\-\@\.]+$/,email_localpart_chars:/^\w[\w-.+%]*/,email_localpart_chars_cap:/^[A-Za-z0-9\_\-\.]+$/,atsign:/\@/,notestsign:/\@/,hostname:/^((\*\.|[a-zA-Z0-9])([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,fqdn_domain:/^((\*\.|[a-zA-Z0-9])([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.){2}[a-zA-Z]{2,6}$/,fullipaddr:/^(\d{1,3}\.){3}\d{1,3}$/,is_ipcidr_or_host:/^[a-z0-9\.\-\/]+$/,ipcidr:/^\d+\.\d+\.\d+\.\d+\/?\d*$/,host:/^[\w\.\-]+$/,wildhost:/^[\*\w\.\-]+$/,wildhostsql:/^[\%\w\.\-]+$/,unlimitedornum:/^[0-9]*$|^unlimited$/,numeric:/^[0-9]+$/,decimal_numeric:/^[-+]?[0-9]+(\.[0-9]+)?$/,decimal_numeric_unlimited:/^[-+]?[0-9]+(\.[0-9]+)?$|^unlimited$/,alphanum:/^[a-z0-9\_\-]+$/i,"start_www.":/^www[.]/i,jpg_gif_png_jpeg:/\.(gif|jpg|png|jpeg)$/,html:/\.(html)$/,spaces_dots_ats_fwdslashes_hyphens:/[\s\.\@\/\-]/,spaces_dots_ats_fwdslashes:/[\s\.\@\/]+/,two_dots:/[^\.]\.[^\.]\.[^\.]/,spaces_ats_fwdslashes:/[\s\@\/]+/,start_end_dashes:/(?:^[-]|[-]$)/,start_end_space:/(?:^[\s]|[\s]$)/,slashes_dots:/[\.\/\\]/,noascii0_255:/[\0\255]/,spaces:/\s+/,forwardslash:/\//,dot:/\./,empty:/^$/,start_end_dots:/(^[.]|[.]$)/,start_dot:/^\./,underscore:/\_/,protocol:/^\S+[:][/][/]/,only_spaces:/^\s+$/,ssl_chars:/^[\-\w\!\+\@\~\:]+$/,whole_nums:/^\d+$/,"1_9only":/^[1-9]$/};var offsetQuirk=0;if(navigator.appVersion.indexOf("MSIE")!=-1||navigator.appVersion.indexOf("Opera")!=-1){offsetQuirk=1}var validgen=0;var validateFocusEl;var validators={};var newest_listener;function password_strength_validator_init(){if(!self.passkey_handler){alert("Javascript Order Error.  You cannot call password_strength_validator_init before passkey_handler has been loaded.");return}passkey_handler();hide_password_tip_panel()}function init_validate_dialog(){if(validate_data_panel_initted){return}validate_data_panel_initted=1;if(!document.getElementById("validate_data_panel")){var a=document.createElement("div");a.id="validate_data_panel";a.style.display="none";a.innerHTML='<div class="hd"><div class="lt"></div><span>Inputs not Valid!</span><div class="rt"></div></div><div class="bd"><div id="inputs_val" style="padding: 30px;"></div></div>';document.body.appendChild(a)}validate_data_panel=new YAHOO.widget.Dialog("validate_data_panel",{width:"300px",fixedcenter:true,constraintoviewport:true,close:true,draggable:false,modal:false,buttons:[{text:"Close",handler:function(){validate_data_panel.hide()},isDefault:true}],visible:false});validate_data_panel.beforeHideEvent.subscribe(handle_hide_validate,validate_data_panel,true);validate_data_panel.render();validate_data_panel.hide();document.getElementById("validate_data_panel").style.display=""}var handle_hide_validate=function(){if(validateFocusEl){validateFocusEl.focus()}};function realtime_validate_init(f){if(!f){alert("realtime_validate_init must be called with a formId");return}if(realtime_validate_inited[f]){return}realtime_validate_inited[f]=1;YAHOO.util.Event.addListener(window,"resize",reposition_all_validator_imgs);if(!validators[f]){alert("No validators registerd for that formId: "+f);return}for(var d=0;d<validators[f].length;d++){var a=validators[f][d].Els;for(var c=0;c<a.length;c++){if(!a[c].id){a[c].id="validgen"+validgen++}validateElMap[a[c].id]=f}}for(var b in validateElMap){var e=document.getElementById(b);if(e.tagName=="TEXTAREA"||e.type=="text"||e.type=="password"||e.type=="textbox"){YAHOO.util.Event.addListener(e,"keyup",function(){single_validate(this.id)},e,true)}else{if(e.tagName=="SELECT"||e.type=="file"){YAHOO.util.Event.addListener(e,"change",function(){single_validate(this.id)},e,true)}}}}function single_validate(a,b){if(!b){b=validateElMap[a]}if(!b){b=document.getElementById(a).form.id}do_validate(b,1,0,a)}function validate_box(a,b){if(!b){b=validateElMap[a]}if(!b){b=document.getElementById(a).form.id}do_validate(b,0,1,a)}function do_validate(q,c,m,k){var p=1;if(!q){alert("do_validate requires at least one argument (formId)");return false}var h=[];var e={};validateFocusEl=0;if(k&&k!=""&&check_elements[k]==null){check_elements[k]={};for(var g=0;g<validators[q].length;g++){var b=0;for(var d=0;d<validators[q][g].Els.length;d++){if(validators[q][g].Els[d].id==k){b=1;break}}if(b){for(var d=0;d<validators[q][g].Els.length;d++){check_elements[k][validators[q][g].Els[d].id]=1}}}}for(var g=0;g<validators[q].length;g++){if(validators[q][g].required){if(!validators[q][g].required()){for(var d=0;d<validators[q][g].Els.length;d++){setup_accept_image(validators[q][g].Els[d].id,2);YAHOO.util.Dom.removeClass(validators[q][g].Els[d],"formverifyfailed")}continue}}if(k&&k!=""){var j=0;for(var d=0;d<validators[q][g].Els.length;d++){if(check_elements[k][validators[q][g].Els[d].id]){j=1}}if(!j){continue}}var l=1;var f=validators[q][g].Els[0];switch(validators[q][g].method){case"match":var o=(typeof(validators[q][g].vkey)=="string"?match_validators[validators[q][g].vkey]:validators[q][g].vkey);if(o==null){alert("Unknown regex key used for match: "+validators[q][g].vkey+". Valid keys are: "+validate_listmatchers())}if(!validators[q][g].Els[0].value.match(o)){l=0}break;case"nomatch":var o=(typeof(validators[q][g].vkey)=="string"?match_validators[validators[q][g].vkey]:validators[q][g].vkey);if(o==null){alert("Unknown regex key used for match: "+validators[q][g].vkey+". Valid keys are: "+validate_listmatchers())}if(validators[q][g].method=="match"){if(!f.value.match(o)){l=0}}else{if(f.value.match(o)){l=0}}break;case"noeqtxt":if(f.value==validators[q][g].vkey){l=0}break;case"minlength":if(f.value.length<validators[q][g].vkey){l=0}break;case"maxlength":if(f.value.length>validators[q][g].vkey){l=0}break;case"NotEleq":if(f.value==validators[q][g].Els[1].value){l=0}break;case"Eleq":if(f.value!=validators[q][g].Els[1].value){l=0}break;case"func":var a=validators[q][g].vkey;if(!a(validators[q][g].Els)){l=0}break;default:alert("Unknown validator: "+validators[q][g].method);p=0;make_elements_valid_status(validators[q][g].Els,0,e)}if(!l){if(!validators[q][g].msg||validators[q][g].msg.match(/^\s*$/)){alert("Missing validation message for validator: "+validators[q][g].method+" key: "+validators[q][g].vkey)}h.push(validators[q][g].msg);if(!validateFocusEl){validateFocusEl=validators[q][g].Els[0]}make_elements_valid_status(validators[q][g].Els,0,e);p=0}else{make_elements_valid_status(validators[q][g].Els,1,e)}}if(!m){apply_elements_status(e)}if(!c&&h.length){init_validate_dialog();var n=[];for(var g=0;g<h.length;g++){n.push('<p class="validation_msg">'+h[g]+"</p>")}document.getElementById("inputs_val").innerHTML=n.join("\n");validate_data_panel.show();validateFocusEl.focus()}return(p?true:false)}function register_validator(f,a,b,c,e,d){if(!c){alert("register_validator requires 4 arguments: (validatemethod, vkey, validateEls, vmsg, [required func]")}if(self.password_str_handle_validate){password_str_handle_validate=0}if(!d){d=b[0].form.id}if(!validators[d]||validators[d]==null){validators[d]=[]}validators[d].push({method:f,vkey:a,Els:b,msg:c,required:e})}var reset_validators=function(){validators={}};var _deactivate_validator=function(e,a,c){if(realtime_validate_inited[e]){for(var b=0;b<a[c].Els;b++){var d=a[c].Els[b];if(d.tagName=="TEXTAREA"||d.type=="text"||d.type=="password"||d.type=="textbox"){YAHOO.util.Event.removeListener(d,"keyup")}else{if(d.tagName=="SELECT"||d.type=="file"){YAHOO.util.Event.removeListener(d,"change")}}}}a.splice(c,1)};var remove_validator=function(d){if(!d.formid&&!d.action&&!d.elementid){alert("please pass {formid:'element_id', action:'validator_action', elementid:'elementname'}")}else{var a=validators[d.formid];for(var c=0;c<a.length;c++){if(a[c].vkey===d.action){for(var b=0;b<a[c].Els.length;b++){if(a[c].Els[b].id===d.elementid){_deactivate_validator(d.formid,a,c);break}}}}}};function apply_elements_status(b){for(var a in b){if(b[a]){setup_accept_image(a,1);YAHOO.util.Dom.removeClass(a,"formverifyfailed")}else{setup_accept_image(a,0);YAHOO.util.Dom.addClass(a,"formverifyfailed")}}}function setup_accept_image(e,b){var f=e+"_status_image_con";var a=document.getElementById(f);if(!a){var c=document.getElementById(e);var d=document.createElement("div");d.style.display="block";d.style.position="absolute";d.style.padding=0;d.style.margin=0;d.id=f;d.innerHTML="&nbsp;";if(b){d.className="accept"}else{d.className="reject"}if(c.nextSibling){c.parentNode.insertBefore(d,c.nextSibling)}else{c.parentNode.appendChild(d)}a=d;reposition_validator_img(a);YAHOO.util.Event.addListener(a,"click",function(){validate_box(getPreviousInput(this).id)},a,true);valImgs.push(a.id);return}if(b==2){a.style.display="none"}else{if(b){a.className="accept";a.style.display=""}else{a.className="reject";a.style.display=""}}}function reposition_all_validator_imgs(){for(var a=0;a<valImgs.length;a++){reposition_validator_img(document.getElementById(valImgs[a]))}}function reposition_validator_img(a){parentElId=getPreviousInput(a).id;parentEl=document.getElementById(parentElId);if(!parentEl){alert("Could not get parent for "+parentElId+" next aw: "+a.id);return}var c=YAHOO.util.Region.getRegion(parentEl);var b;if(YAHOO.util.Dom.hasClass(parentEl,"validator_position_right")==true){b="right"}if((b&&b=="right")||parentEl.tagName=="SELECT"||parentEl.tagName=="TEXTAREA"||parentEl.type=="file"){a.style.left=(c.left+parentEl.offsetWidth+3)+"px"}else{a.style.left=(c.left+parentEl.offsetWidth-16-(offsetQuirk?4:2))+"px"}a.style.top=(c.top+((parentEl.offsetHeight-16)/2)-(offsetQuirk?2:0))+"px"}function make_elements_valid_status(a,b,d){for(var c=0;c<a.length;c++){if(!a[c].id){a[c].id="validgen"+validgen++}if(c>0){continue}if(b&&d[a[c].id]!=0){d[a[c].id]=1}else{d[a[c].id]=0}}}function getPreviousInput(a){while(a.previousSibling&&(a.tagName!="INPUT"||a.type=="submit"||a.type=="button")&&a.tagName!="SELECT"&&a.tagName!="TEXTAREA"){a=a.previousSibling}return a}function validate_listmatchers(){var a=[];for(var b in match_validators){a.push(b)}return a.join(" ")}function get_url_depth(){if(cached_url_depth){return cached_url_depth}var c=window.location.href;var b=c.split("/");b.shift();b.shift();b.shift();b.pop();if(c.match(/\/frontend\//)){b.shift();b.shift()}var a=[];for(i=0;i<b.length;i++){a.push("..")}cached_url_depth=a.join("/");return cached_url_depth}function radio_value_is(b,c){if(isArray(b)){for(var a=0;a<b.length;a++){if(b[a].value==c&&b[a].checked){return true}}}else{if(b.value==c&&b.checked){return true}}return false}function isArray(a){if(a.length>0){if(a[0]&&a[0].length==1){return false}return true}return false};