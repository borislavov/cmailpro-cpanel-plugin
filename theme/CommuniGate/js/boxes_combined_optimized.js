register_interfacecfg_nvdata("xmainrollstatus");register_interfacecfg_nvdata("xmaingroupsorder");if(typeof BOX_CONTAINER==="undefined"){var BOX_CONTAINER_ID="boxes"}if(typeof DEFAULT_BOX_ORDER==="undefined"){var DEFAULT_BOX_ORDER="pref|mail|logs|files|domains|db|sec|software|advanced".split("|")}var Box_Container;var Box_Order=get_box_order();var Boxes;var Collapsed_Boxes={};NVData.xmainrollstatus.split("|").forEach(function(a){var b=a.match(/^(.*)=0$/);if(b){Collapsed_Boxes[b[1]]=true}});var Rolling_Boxes={};function rollbox(l,b){var k=DOM.getAncestorByClassName(l,"itembox");var i=k.id;if(i in Rolling_Boxes){return}Rolling_Boxes[i]=true;var f=k.getElementsByTagName("h6")[0];var a=DOM.getNextSibling(f);var h=DOM.getNextSibling(f.parentNode);var g=DOM.hasClass(a,"box-collapse-control");if(i in Collapsed_Boxes){var c=CPANEL.animate.fade_in(h);var e=CPANEL.animate.slide_down(h,function(){c.stop(true);delete Rolling_Boxes[i]});DOM.removeClass(f,"no_bottom_border");var d=g?{from:180,to:360}:{from:0,to:180};var j=new CPANEL.animate.Rotation(a,d,0.2);j.animate();delete Collapsed_Boxes[i]}else{var c=CPANEL.animate.fade_out(h);var e=CPANEL.animate.slide_up(h,function(){c.stop(true);DOM.addClass(f,"no_bottom_border");delete Rolling_Boxes[i]});var d=g?{from:360,to:180}:{from:180,to:0};var j=new CPANEL.animate.Rotation(a,d,0.2);j.animate();Collapsed_Boxes[i]=true}if(!b){setboxstatus()}}function raw_set_box(a,e){var b=a.getElementsByTagName("h6")[0];var d=DOM.getNextSibling(b);var c=DOM.getNextSibling(b.parentNode);if(e){c.style.display="";DOM.removeClass(b,"no_bottom_border");DOM.replaceClass(d,"box-expand-control","box-collapse-control")}else{c.style.display="none";DOM.addClass(b,"no_bottom_border");DOM.replaceClass(d,"box-collapse-control","box-expand-control")}}function x3_DDItem(){x3_DDItem.superclass.constructor.apply(this,arguments)}YAHOO.extend(x3_DDItem,CPANEL.dragdrop.DDItem,{endDrag:function(){x3_DDItem.superclass.endDrag.apply(this,arguments);var a=get_box_order();if(a.toString()!==Box_Order.toString()){Box_Order=a;CPANEL.nvdata.set("xmaingroupsorder",Box_Order.join("|"))}}});function init_boxes(){for(var e in Collapsed_Boxes){raw_set_box(document.getElementById(e),false)}Box_Container=document.getElementById(BOX_CONTAINER_ID);if(!Box_Container){return}var a=CPANEL.dragdrop.containers(Box_Container,undefined,{item_constructor:x3_DDItem,dragElId:"menu_drag_el",placeholder:"drag_placeholder",animation_proxy_class:"anim_proxy"});for(var b=0;b<a.items.length;b++){var d=a.items[b];var c=DOM.get(d.getEl().id+"-body");DOM.addClass(c,"cellbox-body");a.items[b].addInvalidHandleClass("cellbox-body")}}function get_box_order(){return DOM.getElementsByClassName("itembox","div",Box_Container).map(function(a){return a.id})}function restoreboxes(){for(var a in Collapsed_Boxes){raw_set_box(document.getElementById(a),false)}}function tempexpandboxes(){for(var a in Collapsed_Boxes){raw_set_box(document.getElementById(a),true)}}function expandallboxes(){for(var a in Collapsed_Boxes){rollbox(document.getElementById(a).getElementsByTagName("h6")[0],true)}setboxstatus()}function defaultorder(){Box_Order=DEFAULT_BOX_ORDER;for(var a=0;a<Box_Order.length;a++){Box_Container.appendChild(DOM.get(Box_Order[a]))}CPANEL.nvdata.set("xmaingroupsorder",Box_Order.join("|"))}function setboxstatus(){var a=CPANEL.util.keys(Collapsed_Boxes).map(function(b){return b+"=0"}).join("|");CPANEL.nvdata.set("xmainrollstatus",a)}function showorder(){alert("The order now is: "+Box_Order.join(" ")+".")}function reload_this_page(){var b=Math.floor(Math.random()*11111111);var a=window.location.href.replace(/[&?]keyid=[^=]*/,"");a+=(a.indexOf("?")!==-1)?"&":"?";a+="keyid="+b;window.location.href=a}function hideicons(){SetNvData("x3_hideicons",1,reload_this_page)}function showicons(){SetNvData("x3_hideicons",0,reload_this_page)}function hidegraphics(){SetNvData("x3_litegraphics",1,reload_this_page)}function showgraphics(){SetNvData("x3_litegraphics",0,reload_this_page)}YAHOO.util.Event.onDOMReady(init_boxes);