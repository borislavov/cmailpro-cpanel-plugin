<cpanel setvar="headerimg=../images/mailmenu.gif">
<cpanel setvar="dprefix=../">
<cpanel Branding="include(stdheader.html)">
	
<style type="text/css">
<?cp Branding::spritelist(.spriteicon_img_mini {float:left;margin-right:5px;background: url\{leftparenthesis}"%"\{rightparenthesis};} %,@spriteurl,images::#icon-${img}_mini {background-position\{colon}0 -${cssposition}px;width\{colon}${width}px;height\{colon}${height}px; }:) imgtype=icon,subtype=img,method=scale_60percent,format=png,img=emailmx ?>
</style>

<div class="body-content">

<div class="h1Title"><div class="spriteicon_img_mini" id="icon-emailmx_mini"></div> <cpanel langprint="MXMaint"></div>
	
<cpanel langprint="MXDesc">

<h2><cpanel langprint="LP-Domain"></h2>
<div class="highlight2">
	<cpanel langprint="LP-Domain">:&nbsp;
	<!-- <?cp Email::listmaildomains(,) ?> -->
	<cpanelif $CPVAR{'maildomainscount'}==1>
		<?cp Email::listmaildomains(% [input type="hidden" id="domain" value="%" /],domain,domain) ?>
	</cpanelif>
	
	<cpanelif $CPVAR{'maildomainscount'}=gt=1>
	<select id="domain" onchange="toggle_domain()">
		<option value="_select_"><cpanel langprint="MXSelectDomain">...</option>
		<?cp Email::listmaildomains([option value="%"]%[/option],domain,domain) ?>
	</select>
	</cpanelif>	
</div>

<br />
<div id="mx_input_and_table" <cpanelif $CPVAR{'maildomainscount'}=gt=1>style="display: none"</cpanelif> >
<div style="display: none">
<h2><cpanel langprint="MX_email_routing"></h2>
<div class="highlight2" id="mxcheck_options_div">

<div class="label_wraps">
<input type="radio" name="mxcheck" id="mxcheck_auto" value="auto" /> <label for="mxcheck_auto" class="label_txt" id="mxcheck_auto_label"><cpanel langprint="MX_auto_detect_config"></label><span class="status" id="mxcheck_auto_current_setting" style="font-weight: bold"></span> (<cpanel langprint="recommended">) <span class="action_link" id="mxcheck_auto_toggle" onclick="CPANEL.util.toggle_more_less(this, 'mxcheck_auto_desc');"><cpanel langprint="cjt_toggle_more"></span>

<br />
<div id="mxcheck_auto_desc" style="display: none">
    <ul class="mxcheck_autolist">
        <li>
			<cpanel langprint="MX_local_exchanger"> <span id="mxcheck_detected_state_local"></span><br />
			<em><cpanel langprint="MX_local_exchanger_auto_desc"></em>
        </li>
        <li>
			<cpanel langprint="MX_backup_exchanger"> <span id="mxcheck_detected_state_secondary"></span><br />
            <em><cpanel langprint="MX_backup_exchanger_auto_desc"></em>
        </li>
        <li>
            <cpanel langprint="MX_remote_exchanger"> <span id="mxcheck_detected_state_remote"></span><br />
			<em><cpanel langprint="MX_remote_exchanger_auto_desc"></em>
        </li>
    </ul>
	<p><cpanel langprint="MX_auto_detect_note"></p>

	<!--<div id="mxcheck_auto_warnings" style="background-color: #F6E082;"></div>-->
</div>
</div>
<div class="label_wraps">
<input type="radio" name="mxcheck" id="mxcheck_local" value="local" /> <label for="mxcheck_local" class="label_txt" id="mxcheck_local_label"><cpanel langprint="MX_local_exchanger"></label> <span class="action_link" onclick="CPANEL.util.toggle_more_less(this, 'mxcheck_local_desc');"><cpanel langprint="cjt_toggle_more"></span><br />
<div id="mxcheck_local_desc" style="display: none">
	<p class="highlight-accordian-desc"><em><cpanel langprint="MX_local_exchanger_desc"></em></p>
</div>
</div>

<div class="label_wraps">
<input type="radio" name="mxcheck" id="mxcheck_secondary" value="secondary" /> <label for="mxcheck_secondary" class="label_txt" id="mxcheck_secondary_label"><cpanel langprint="MX_backup_exchanger"></label> <span class="action_link" onclick="CPANEL.util.toggle_more_less(this, 'mxcheck_secondary_desc');"><cpanel langprint="cjt_toggle_more"></span><br />
<div id="mxcheck_secondary_desc" style="display: none">
	<p class="highlight-accordian-desc"><em><cpanel langprint="MX_backup_exchanger_desc"></em></p>
</div>
</div>
<div class="label_wraps">
<input type="radio" name="mxcheck" id="mxcheck_remote" value="remote" /> <label class="label_txt" for="mxcheck_remote" id="mxcheck_remote_label"><cpanel langprint="MX_remote_exchanger"></label> <span class="action_link" onclick="CPANEL.util.toggle_more_less(this, 'mxcheck_remote_desc');"><cpanel langprint="cjt_toggle_more"></span><br />
<div id="mxcheck_remote_desc" style="display: none">
	<p class="highlight-accordian-desc"><em><cpanel langprint="MX_remote_exchanger_desc"></em></p>
</div>
</div>

		<div style="padding: 5px 0px">
			<input class="input-button" type="button" value="<cpanel langprint="Change">" id="change_mxcheck_button" onclick="change_mxcheck();" /> <span id="mxcheck_status"></span>
		</div>
		
	<em><cpanel langprint="current_setting_bold"></em><br /><br />
	<img src="/cjt/images/icons/warning.gif" alt="Warning" /> <cpanel langprint="MX_routing_warning">

</div><!-- end highlight -->
<br />
</div>
<h2><cpanel langprint="MXAddNewRec"></h2>
<div class="highlight">
	<table cellpadding="3" cellspacing="0" style="margin-left: 50px">
		<tr>
			<td style="text-align: right"><cpanel langprint="MXModifyPriority"></td>
			<td><input id="priority" type="text" size="3" maxlength="3" value="0" style="width: 150px" />&nbsp;<span id="priority_error"></span></td>
		</tr>
		<tr>
			<td style="text-align: right"><cpanel langprint="EFDestination">:</td>
			<td><input id="destination" type="text" style="width: 150px" />&nbsp;<span id="destination_error"></span></td>
		</tr>
		<tr>
			<td></td>
			<td>
				<div style="height: 5px"></div>
				<input class="input-button" id="submit_mx_record" type="button" value="Add New Record" />
				<div id="add_new_record_status"></div>
			</td>
		</tr>		
	</table>
	<div class="cjt_status_bar" id="add_new_record_status_bar" style="margin: 5px -5px 0px -5px"></div>
</div>

<h2><cpanel langprint="MXCurrent"></h2>
<div id="mx_entries"><div style="height: 50px"></div></div>

</div><!-- end mx_input_and_table -->

</div><!-- end body-content -->

<script type="text/javascript">
//<![CDATA[
var LANG = {
MX_priority_positive_integer : "<cpanel langprint="MX_priority_positive_integer">",
MX_destination : "<cpanel langprint="MX_destination">",
MX_priority : "<cpanel langprint="MX_priority">",
MX_destination_fqdn : "<cpanel langprint="MX_destination_fqdn">",
content_changed : "<cpanel langprint="content_changed">",
must_change_before_edit : "<cpanel langprint="must_change_before_edit">",
MX_added_record : "<cpanel langprint="MX_added_record">",
MX_adding_record : "<cpanel langprint="MX_adding_record">",
MX_deleting_record : "<cpanel langprint="MX_deleting_record">",
MX_editing_record : "<cpanel langprint="MX_editing_record">",
MX_changed_record : "<cpanel langprint="MX_changed_record">",
MX_no_records_set : "<cpanel langprint="MX_no_records_set">",
MX_changing : "<cpanel langprint="MX_changing">",
MX_current_detected_setting : "<cpanel langprint="MX_current_detected_setting">",
MX_Local : "<cpanel langprint="MX_Local">",
MX_Backup : "<cpanel langprint="MX_Backup">",
MX_Remote : "<cpanel langprint="MX_Remote">"
};
//]]>
</script>

<cpanel Branding="include(stdfooter.html)">
