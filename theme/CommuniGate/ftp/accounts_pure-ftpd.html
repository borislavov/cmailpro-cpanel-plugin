<cpanel setvar="headerimg=../images/topftp.gif">
<cpanel setvar="dprefix=../">

<cpanelif $FORM{'itemsperpage'}>
	<cpanel setvar="itemsperpage=$FORM{'itemsperpage'}">
</cpanelif>
<cpanelif !$FORM{'itemsperpage'} || !$CPVAR{'itemsperpage'}>
	<cpanel setvar="itemsperpage=10">
</cpanelif>
<cpanel Branding="include(stdheader.html)">

<cpanelfeature ftpaccts>
<!--[if IE]>   
<style type="text/css">    
#pass_bar{ margin-top:2px; }  
</style>      
<![endif]-->	
<script type="text/javascript">
//<![CDATA[
<cpanel relinclude="js/expander_optimized.js">
truncate_on = 1;
truncate_wrap = 1;
truncate_tooltips = 0;
ajaxloader_on = 1;
register_truncate_table('ftptbl');

var modeddir = 0;

function MM_jumpMenu(targ,selObj,restore){ //v3.0
  eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'");
  if (restore) selObj.selectedIndex=0;
}
//]]>
</script>

<div class="body-content">		
<style type="text/css">
<?cp Branding::spritelist(.spriteicon_img_mini {float:left;margin-right:5px;background: url\{leftparenthesis}"%"\{rightparenthesis};} %,@spriteurl,images::#icon-${img}_mini {background-position\{colon}0 -${cssposition}px;width\{colon}${width}px;height\{colon}${height}px; }:) imgtype=icon,subtype=img,method=scale_60percent,format=png,img=ftpaccounts ?>
</style>

<div class="h1Title"><div class="spriteicon_img_mini" id="icon-ftpaccounts_mini"></div><cpanel langprint="MENUFTPAccounts"></div>

<p class="description"><cpanel langprint="FTPDescription"> <cpanel print="$CPDATA{'DNS'}"> <cpanel langprint="FTPPostDescript"></p>
<cpanel setvar="vidtut_name=ftpacct">
<cpanel setvar="vidtut_header=INDXFtpAccounts">
<cpanel setvar="vidtut_description=VidFtpDesc">
<cpanel setvar="vidtut_video_name=ftpacct_lo">
<cpanel setvar="vidtut_width=450">
<cpanel setvar="vidtut_height=353">
<cpanel include="../video_tutorial_include.html">

<h2><cpanel langprint="FTPAddedHead"></h2>
			<?cp StatsBar::stat( [p class="caution"]$LANG{'statsattention'}&nbsp;%&nbsp;$LANG{'statsoutof'}&nbsp;%$LANG{'available'}&nbsp;$LANG{'MENUFTPAccounts'}[/p],count,max) display=ftpaccounts,warnings=1,warninglevel=80,infinitylang=true ?>

			<cpanelif $CPVAR{'statsbar_ftpaccounts_maxed'}>
			 	<style type="text/css">
				.highlight{ display:none;}			
				</style>
				<p class="alert_box"><cpanel langprint="QuotaWarning1"> <cpanel langprint="MENUFTPAccounts">. <cpanel langprint="QuotaWarning2">  </p> 
			</cpanelif>

<div class="highlight">
<form method="post" action="doaddftp.html" name="mainform" id="mainform">
	<table cellpadding="3" cellspacing="0">
		<tr>
			<td style="width: 125px; text-align: right"><cpanel langprint="FTPLogin"></td>
			<td style="width: 150px"><input type="text" name="login" id="login" style="width: 150px" /></td>
			<td style="width: 100px">@<cpanel print="$CPDATA{'DNS'}"></td>
			<td><div id="login_error"></div></td>
		</tr>
		<tr>
			<td align="right"><cpanel langprint="FTPPassword"></td>
			<td align="left"><input type="password" name="password" id="password" style="width: 150px" /></td>
			<td><div id="password_error"></div></td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td align="right"><cpanel langprint="FTPPasswordAgain"></td>
			<td align="left"><input type="password" name="password2" id="password2" style="width: 150px" /></td>
			<td><div id="password2_error"></div></td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td align="right">
				<cpanel langprint="email_strength"> (<div style="display: inline" id="why_strong_passwords_link" class="action_link"><cpanel langprint="email_why"></div>):
				<div id="why_strong_passwords_text" style="display: none"><cpanel langprint="email_password_why"><br /><br /><cpanel langprint="email_password_tip"></div>
			</td>
			<td><div id="password_strength" style="width: 150px; height: 20px; border: 1px solid black; margin: 5px 0px 3px 0px"></div></td>
			<td colspan="2"><input type="button" id="create_strong_password" class="input-button" value="<cpanel langprint="cjt_password_generator">" tabindex="-1" /></td>
		</tr>
		<tr>
			<td style="text-align: right"><cpanel langprint="FTPDirectory">: <img src="<cpanel MagicRevision="uri("images/homeb.gif")">" alt="home" align="middle" />/</td>
			<td colspan="3">
				<cpanel setvar="autoinput=homedir">
				<cpanel setvar="autodirsonly=1">
				<cpanel setvar="autofunc=dirComplete">
				<script type="text/javascript">
				function dirComplete(inputObj) {modeddir=1;}   
				</script>
				<table cellpadding="0" cellspacing="0" style="padding:0;margin:0;"><tr>
				<td><cpanel relinclude="autodir/dirbox.html"></td>
				</tr></table>
			</td>
		</tr>
		<tr>
			<td align="right"><cpanel langprint="quota_title">:</td>
			<td align="left" colspan="3">
				<input type="radio" name="quota" value="250" id="quota_number" /> <input type="text" id="quota_value" size="5" maxlength="5" disabled="disabled" /> <div style="vertical-align: middle" id="quota_value_error"></div><br />
				<input type="radio" name="quota" value="unlimited" id="quota_unlimited" checked="checked" /> <label for="quota_unlimited"><cpanel langprint="FTPUnlimited"></label> <div style="vertical-align: middle" id="quota_unlimited_error"></div>
			</td>
		</tr>
		<tr><td colspan="4"><br /></td></tr>
		<tr>
			<td>&nbsp;</td> 
			<td align="left"><input type="submit" class="input-button" id="ftp_create_submit" value="<cpanel langprint="FTPCreate">" /></td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
	</table>
</form>
</div><!-- end highlight -->
<script type="text/javascript">
//<![CDATA[
var REQUIRED_PASSWORD_STRENGTH = parseInt('<?cp PasswdStrength::get_required_strength(%,strength) app=ftp ?>') || 0;
var init_validation = function() {
	var login_validator = new CPANEL.validate.validator("<cpanel Locale="maketext('FTP Login')">");
	login_validator.add("login", "alphanumeric", "<cpanel langprint="FTPUserAlpha">");
	login_validator.add("login", "max_length(%input%, 25)", "<cpanel langprint="FTPMsgUser25Char">");
	login_validator.attach();
	
	var password_validators = CPANEL.password.setup("password", "password2", "password_strength", REQUIRED_PASSWORD_STRENGTH, "create_strong_password", "why_strong_passwords_link", "why_strong_passwords_text");
	
	var dir_validator = new CPANEL.validate.validator("<cpanel Locale="maketext('Directory Path')">");
	dir_validator.add("homedir", "dir_path", "<cpanel langprint="validation_directory_paths">");
	dir_validator.attach();
	
	var quota_number = new CPANEL.validate.validator("<cpanel Locale="maketext('Quota')">");
	quota_number.add("quota_value", "positive_integer", "<cpanel langprint="email_quota_number">", "quota_number");
	quota_number.attach();
	
	var quota_unlimited = new CPANEL.validate.validator("<cpanel Locale="maketext('Quota')">");
	quota_unlimited.add("quota_unlimited", "anything", "", "quota_unlimited");
	quota_unlimited.attach();	
	
	CPANEL.validate.attach_to_form("ftp_create_submit", [login_validator, password_validators[0], password_validators[1], dir_validator, quota_number, quota_unlimited]);
	
	YAHOO.util.Event.on("quota_number", "click", function() {
		YAHOO.util.Dom.get("quota_value").disabled = false;
		quota_number.verify();
		quota_unlimited.clear_messages();
	});
	
	YAHOO.util.Event.on("quota_unlimited", "click", function() {
		YAHOO.util.Dom.get("quota_value").disabled = true;
		quota_number.clear_messages();
		quota_unlimited.verify();
	});	
	
	YAHOO.util.Event.on("login", "change", function() {
		YAHOO.util.Dom.get("homedir").value = "public_html/" + YAHOO.util.Dom.get("login").value;
		dir_validator.verify();
	});
	
	YAHOO.util.Event.on("quota_value", "change", function() {
		YAHOO.util.Dom.get("quota_number").value = YAHOO.util.Dom.get("quota_value").value;
	});	
	
	YAHOO.util.Dom.get("login").focus();
};
YAHOO.util.Event.onDOMReady(init_validation);
//]]>
</script>

</cpanelfeature>
	
<br /><br />
<cpanelfeature ftpaccts> 
<h2><cpanel langprint="FTPAcctManagement"></h2>
<cpanel relinclude="expander/css_include.html">
<script type="text/javascript">
register_expander_container('ftptbl');
register_expander_obj('passwd');
register_expander_obj('delete');
register_expander_obj('quota');
register_expander_obj('homedir');
register_expander_obj('clientconf');
</script>

<div class="search-panel">
		<form method="get" action=""><span class="boldit"><cpanel langprint="SESearchButton"></span><input type="text" size="15" name="searchregex" value="<cpanel print="$FORM{'searchregex'}">" /><input type="submit" class="input-button" value="<cpanel langprint="go">" /></form>
</div>

<cpanelif !$CPVAR{'mobile'}>
<table width="690" border="0" cellpadding="0" cellspacing="0" id="ftptbl" class="sortable">
	<tr>
		<th class="cell" scope="col"><cpanel langprint="FTPUser"></th>
		<th class="cell sorttable_nosort" scope="col"><cpanel langprint="FTPType"></th>
		<th class="cell" scope="col"><cpanel langprint="FTPDirectory"></th>
		<th class="cell" scope="col"><cpanel langprint="FTPDiskUsage"></th>
		<th class="cell" scope="col"><cpanel langprint="FTPQuota"></th>
		<th class="cell sorttable_nosort" scope="col" colspan="4"><cpanel langprint="FTPFunctions"></th>
	</tr>
	<?cp Ftp::listftpwithdisk(
	[tr class="row-%"]
		[td class="cell truncate"]%[/td]
		[td class="cell" align="center"][img alt="%" src="$MAGICREVISION{'images/%.gif'}" /][/td]
		[td class="truncate cell" truncate="30" align="left" width="1\{percent}" nowrap="nowrap"][div class="exptxtboxpre" id="homedir-%" align="left"]%[/div][/td]
		[td class="cell"] [div style="text-align: right"]%[/div][/td]
		[td class="cell" ][div style="text-align: right"]%[/div][/td]
		[td class="maindisp" nowrap="nowrap" style="padding-bottom: 5px;" colspan="4"]
			[form action="redirect.html"]
				[div align="center"]
				[select name="url" onchange="MM_jumpMenu\{leftparenthesis}'parent'\{comma}this\{comma}0\{rightparenthesis}"] 
					[option selected="selected"]$LANG{'Choose'}[/option]
					[option id="delete" value="dodelftp.html?login=%&amp;type=%&amp;homedir=%" on="on" onchange="return confirmSubmit\{leftparenthesis}\{rightparenthesis}"]$LANG{'Delete'}[/option]
					[option value="editquota.html?acct=%&amp;type=%"]$LANG{'EQuota'}[/option]              
					[option value="passwdftp.html?acct=%&amp;type=%"]$LANG{'TChangePass'}[/option]
					[option value="configure.html?acct=%&amp;type=%"]$LANG{'ConfigFtp'}[/option]
				[/select]
				[input class="input-button" type="submit" value="$LANG{'go'}" /]
				[/div]
			[/form]
		[/td]
		[td class="mainhide" colspan="4" nowrap="nowrap" style="padding-left: 6px;" width="200"]
			[div style="width:200px;"]
				[div class="expbox" id="delete-%" onmouseover="runAnimOver[[this]];"][a href="dodelftp.html?login=%&amp;type=%&amp;homedir=%"][img id="delete-img-%" src="$BRANDINGIMG{'email-del'}" width="16" height="16" border="0" alt="" align="middle" /][br /][span id="delete-txt-%"]$BRLANG{'Delete'}[/span][/a][/div]
				[div class="expbox" id="quota-%" onmouseover="runAnimOver[[this]];"][a href="editquota.html?acct=%&amp;type=%"][img id="quota-img-%" src="$BRANDINGIMG{'email-quota'}" width="16" height="16" border="0" align="middle" alt="" /][br /][span id="quota-txt-%"]$BRLANG{'EQuota'}[/span][/a][/div]
				[div class="expbox" id="passwd-%" onmouseover="runAnimOver[[this]];"][a href="passwdftp.html?acct=%&amp;type=%"][img id="passwd-img-%" src="$BRANDINGIMG{'email-pass'}" width="16" height="16" border="0" alt="" align="middle" /][br /][span id="passwd-txt-%"]$BRLANG{'TChangePass'}[/span][/a][/div]
				[div class="expbox" id="clientconf-%" onmouseover="runAnimOver[[this]];"][a href="configure.html?acct=%&amp;type=%"][img id="clientconf-img-%" src="$BRANDINGIMG{'ftpclient-config'}" width="16" height="16" border="0" alt="" align="middle" /][br /][span id="clientconf-txt-%"]$BRLANG{'ConfigFtp'}[/span][/a][/div]
			[/div]
		[/td]
	[/tr]	
	,*num,serverlogin,accttype,accttype,serverlogin,htmldir,humandiskused,humandiskquota,login,accttype,dir,login,accttype,login,accttype,login,accttype,serverlogin,login,accttype,dir,serverlogin,serverlogin,serverlogin,login,accttype,serverlogin,serverlogin,serverlogin,login,accttype,serverlogin,serverlogin,serverlogin,login,accttype,serverlogin,serverlogin) api2_paginate=1,api2_paginate_start=$FORM{'api2_paginate_start'},api2_paginate_size=$CPVAR{'itemsperpage'},regex=$FORM{'searchregex'},infinitylang=true,dirhtml=[img alt="" border="0" src="$BRANDINGIMG{'homeb'}" align="middle" /] ?>
</table>
<?cp UI::paginate(%,paginator) currentpage=$CPVAR{'currentpage'},pages=$CPVAR{'pages'},itemsperpage=$CPVAR{'itemsperpage'} ?>
<cpanelif $CPVAR{'pages'} && !$CPVAR{'pages'}==1>
	<div style="float:right"><form>
	<cpanel langprint="PaginatorShowing"> <select name="itemsperpage" onchange="this.form.submit();">
	<?cp UI::paginate_list([option value="%" %]%[/option],item,selected=1?selected:,item) itemsperpage=$CPVAR{'itemsperpage'},itemlist=10:25:50:100:250:500 ?>
	</select><noscript><button id="my_button" onclick="" type="submit" Value=""><cpanel Locale="maketext('Change')"></button></noscript>  <cpanel langprint="PaginatorResults"> 
	</form></div>
</cpanelif>
</cpanelif><!-- end cpanelif !$CPVAR{'mobile'} -->

<br /><br />

<cpanel include="accountslegendinclude.html">

</div>
</cpanelfeature>

<cpanelfeature !ftpaccts>
	<cpanel include="../refresh.html">
</cpanelfeature>

<div id="divgen_expand"></div>

<cpanel Branding="include(stdfooter.html)">
