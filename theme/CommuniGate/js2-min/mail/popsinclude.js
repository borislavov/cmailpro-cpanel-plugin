var VAL_EMAIL=new CPANEL.validate.validator(LANG.new_email_input);var VAL_PASSWORD=new CPANEL.validate.validator(LANG.password_input);var VAL_PASSWORD2=new CPANEL.validate.validator(LANG.password_input);var VAL_QUOTA=new CPANEL.validate.validator(LANG.quota_input);var PASSWORD_BAR;function add_validation(){VAL_EMAIL.add("email_input","local_part_email",LANG.not_valid_email);VAL_EMAIL.add("email_input","max_length(%input%, 128)",LANG.email_max_128_char);VAL_EMAIL.attach();VAL_PASSWORD.add("password",verify_password_strength,YAHOO.lang.substitute(LANG.password_strength_must_be,{min_passwd_strength:REQUIRED_PASSWORD_STRENGTH}));VAL_PASSWORD.add("password",'no_chars(%input%, " ")',LANG.password_spaces);VAL_PASSWORD.attach();VAL_PASSWORD2.add("password2","equals('password', 'password2')",LANG.passwords_not_match);VAL_PASSWORD2.attach();VAL_QUOTA.add("quota",quota_over_2gigs,LANG.quota_2gig);VAL_QUOTA.add("quota",mailbox_quota,LANG.quota_number_or_unlimited);VAL_QUOTA.attach()}var mailbox_quota=function(){var a=DOM.get("quota").value;if(a==="unlimited"){return true}if(CPANEL.validate.integer(a)===true){return true}return false};var quota_over_2gigs=function(){var a=DOM.get("quota").value;if(CPANEL.validate.integer(a)==true&&a>2048){return false}return true};var verify_password_strength=function(){if(PASSWORD_BAR.current_strength>=REQUIRED_PASSWORD_STRENGTH){return true}return false};var create_strong_password1=function(a){CPANEL.password.generate_password(use_generated_password)};function use_generated_password(a){DOM.get("password").value=a;DOM.get("password2").value=a;PASSWORD_BAR.check_strength("password",function(){VAL_PASSWORD.verify()});VAL_PASSWORD2.verify()}var fill_unlimited=function(){YAHOO.util.Dom.get("quota").value=0;VAL_QUOTA.verify()};var check_quota=function(){if(quota_over_2gigs()==false){DOM.get("quota").value=0;VAL_QUOTA.verify()}};function init_popsinclude(){CPANEL.panels.create_help("why_strong_passwords_panel","why_strong_passwords");add_validation();PASSWORD_BAR=new CPANEL.password.strength_bar("password_strength");PASSWORD_BAR.attach("password",function(){VAL_PASSWORD.verify()});EVENT.on("create_strong_password","click",create_strong_password1);EVENT.on("quota","blur",check_quota);CPANEL.validate.attach_to_form("new_email_submit",[VAL_EMAIL,VAL_PASSWORD,VAL_PASSWORD2,VAL_QUOTA]);DOM.get("email_input").focus()}EVENT.onDOMReady(init_popsinclude);