<cpanel setvar="headerimg=../images/topcrontab.gif">
<cpanel setvar="dprefix=../">
<cpanel Branding="include(stdheader.html)">
<link rel="stylesheet" href="ts.css">
<style>
td { border-bottom: 1px solid black !important;
     word-wrap: break-word !important;
	}
table tbody tr:hover { background-color: #e6e8ed; cursor: default;}
thead {background-color: #E5E5E5;}
</style>


<div class="body-content">
<h1 id="blah"><cpanel langprint="VSPowByCA"></h1>
<br>
<center><b><cpanel langprint="cleanupproc"></b></center>
<br/>
<form action="live_disinfect.html" method=post onsubmit="window.onbeforeunload=function () {}">
	<table cellpadding="2px" cellspacing="0" width="100%" style="border: 1px solid #a5a5a5; table-layout: fixed">
		<thead>
			<tr class="dynamic_table">
				<th width="25%"><b><cpanel langprint="VSFile"></b></th>
				<th width="25%"><b><cpanel langprint="Virus"></b></th>
				<th id='disinfectLabel'><b><cpanel langprint="Disinfect"> *</b></th>
				<th><b><cpanel langprint="Quarantine"></b></th>
				<th><b><cpanel langprint="Destroy"></b></th>
				<th><b><cpanel langprint="Ignore"></b></th>
			</tr>
		</thead>
		<tbody>
			<cpanel ClamScanner="disinfectlist()">
		</tbody>
		<tfoot>		
			<tr >
				<th>&nbsp;</th>
				<th>&nbsp;</th>
				<th id='disinfectButton'><input type='button' value='Select All' onclick='selectAll("x")'/></th>
				<th><input type='button' value='<cptext "Select All">'  onclick='selectAll("q")' /></th>
				<th><input type='button' value='<cptext "Select All">'  onclick='selectAll("d")' /></th>
				<th><input type='button' value='<cptext "Select All">'  onclick='selectAll("i")' /></th>
			</tr>
		</tfoot>
	</table>
	<br/><br/>
	<center><input type="submit" value="<cpanel langprint="Proccleanup">" onclick="removeOnload()"/></center>
	

</form></center>
<div id="mailboxNotice">* <cpanel langprint="VSDisinfectTxt">.</div>

<br><br>
<!--
<center>
<div class="return-link"><a href="../index.html">&larr; <cptext "Go Back"></a></div>
</center>
</div>
-->
<cpanel Branding="include(stdfooter.html)">
<script>
    // cleanup the table
	var cells = document.getElementsByTagName('td');
	var disinfect = 0;
	for (var i=0; i<cells.length; i++) {
		if (cells[i].firstChild) {
			if (/input/i.test(cells[i].firstChild.tagName)) {
				cells[i].align='center';
				cells[i].style.borderLeft = '1px solid black';
				if (/x/i.test(cells[i].firstChild.value)) disinfect++;
			}
		}
	}
	if (!disinfect) {
		document.getElementById('disinfectButton').innerHTML='&nbsp;';
		document.getElementById('disinfectLabel').innerHTML='&nbsp;';
		document.getElementById('mailboxNotice').innerHTML='&nbsp;';
	}
	
	var selectAll = function (v) {
	   var cells = document.getElementsByTagName('input');
	   for (var i=0; i<cells.length; i++) {
			if (cells[i].value==v) {
				cells[i].checked=true;
			}
		}
	}
	
	window.onbeforeunload = function () {
		return "<cptext "You should not leave this page without hitting the 'Process Cleanup' button!\n\nPlease press the 'Cancel' button.">";
	}

var removeOnload = function () {
   window.onbeforeunload = null;
}	
</script>
